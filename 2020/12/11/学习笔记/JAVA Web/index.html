<!DOCTYPE html><html lang="zh_CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Saxon 一个向往远方的游者 | Saxon 一个向往远方的游者</title><meta name="keywords" content="blog"><meta name="author" content="Saxon"><meta name="copyright" content="Saxon"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="JAVA　WEB一、基本概念一、前言web开发：就是基于网页的开发  静态网页：每个人看到的都是一样的。例如HTML.css js 等 动态网页：例如淘宝等大型网站  在Java中，动态web技术就叫做Java web; 二、web应用程序web应用程序：可以提供给浏览器访问的程序 web应用程序编写完毕后，如果需要给他人访问，那么需要一个服务器来统一管理。 三、静态web 客户端发出**(req">
<meta property="og:type" content="article">
<meta property="og:title" content="Saxon 一个向往远方的游者">
<meta property="og:url" content="http://www.saxonmo.com/2020/12/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JAVA%20Web/index.html">
<meta property="og:site_name" content="Saxon 一个向往远方的游者">
<meta property="og:description" content="JAVA　WEB一、基本概念一、前言web开发：就是基于网页的开发  静态网页：每个人看到的都是一样的。例如HTML.css js 等 动态网页：例如淘宝等大型网站  在Java中，动态web技术就叫做Java web; 二、web应用程序web应用程序：可以提供给浏览器访问的程序 web应用程序编写完毕后，如果需要给他人访问，那么需要一个服务器来统一管理。 三、静态web 客户端发出**(req">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2020-12-11T01:10:48.495Z">
<meta property="article:modified_time" content="2020-11-10T04:50:24.113Z">
<meta property="article:author" content="Saxon">
<meta property="article:tag" content="blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="/img/1.png"><link rel="canonical" href="http://www.saxonmo.com/2020/12/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JAVA%20Web/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-11-10 12:50:24'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://w.wallhaven.cc/full/2e/wallhaven-2eroxm.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">50</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Saxon 一个向往远方的游者</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><h1 class="post-title">无题</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-12-11T01:10:48.495Z" title="发表于 2020-12-11 09:10:48">2020-12-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-11-10T04:50:24.113Z" title="更新于 2020-11-10 12:50:24">2020-11-10</time></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="JAVA-WEB"><a href="#JAVA-WEB" class="headerlink" title="JAVA　WEB"></a>JAVA　WEB</h1><h2 id="一、基本概念"><a href="#一、基本概念" class="headerlink" title="一、基本概念"></a>一、基本概念</h2><h3 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h3><p><strong>web开发：就是基于网页的开发</strong></p>
<ul>
<li>静态网页：每个人看到的都是一样的。例如HTML.css js 等</li>
<li>动态网页：例如淘宝等大型网站</li>
</ul>
<p>在Java中，动态web技术就叫做Java web;</p>
<h3 id="二、web应用程序"><a href="#二、web应用程序" class="headerlink" title="二、web应用程序"></a>二、web应用程序</h3><p>web应用程序：可以提供给浏览器访问的程序</p>
<p>web应用程序编写完毕后，如果需要给他人访问，那么需要一个服务器来统一管理。</p>
<h3 id="三、静态web"><a href="#三、静态web" class="headerlink" title="三、静态web"></a>三、静态web</h3><p><img src="https://upload-images.jianshu.io/upload_images/9082898-21595aecd7a3ad26.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/588/format/webp"></p>
<p>客户端发出**(request)<strong>请求访问服务器上的web service ，再通过web service 去找寻拂服务器上的html等静态网页资源，最后再由web service返回</strong>(response)**响应</p>
<p><strong>缺点:</strong></p>
<ul>
<li>web无法实现动态更新，所有用户看到的都是同一个页面</li>
<li>无法与数据库进行连接，数据无法持久化，用户无法进行交互</li>
</ul>
<h3 id="四、动态web"><a href="#四、动态web" class="headerlink" title="四、动态web"></a>四、动态web</h3><p><img src="https://p-blog.csdn.net/images/p_blog_csdn_net/lili6755/EntryImages/20091228/3.jpg"></p>
<p><strong>优点:</strong></p>
<ul>
<li>web可以动态更新，所有用户看到的都不是同一个页面</li>
<li>与数据库进行连接</li>
</ul>
<h2 id="二、web服务器"><a href="#二、web服务器" class="headerlink" title="二、web服务器"></a>二、web服务器</h2><h3 id="一、脚本语言"><a href="#一、脚本语言" class="headerlink" title="一、脚本语言"></a>一、脚本语言</h3><h4 id="一、asp"><a href="#一、asp" class="headerlink" title="一、asp"></a>一、asp</h4><p>一、概念：</p>
<p>ASP即Active Server Pages，是Microsoft公司开发的服务器端脚本环境，可用来创建动态交互式网页并建立强大的web应用程序。当服务器收到对ASP文件的请求时，它会处理包含在用于构建发送给浏览器的HTML（<em>Hyper Text Markup Language，超文本置标语言</em>）网页文件中的服务器端脚本代码。除服务器端脚本代码外，ASP文件也可以包含文本、HTML（<em>包括相关的客户端脚本</em>）和com组件调用。</p>
<p><strong>ASP可以使用两种脚本语言：VBScript和Jscript（所谓的JScript语言就是微软版本的JavaScript语言）</strong></p>
<h4 id="二、PHP"><a href="#二、PHP" class="headerlink" title="二、PHP"></a>二、PHP</h4><p>PHP即“超文本预处理器，是一种通用开源脚本语言。PHP是在服务器端执行的脚本语言，与C语言类似，是常用的网站编程语言。PHP独特的语法混合了C、Java、Perl以及 PHP 自创的语法。利于学习，使用广泛，主要适用于web开发领域。</p>
<p><strong>无法承载大的访问量的访问；</strong></p>
<h4 id="三、JSP"><a href="#三、JSP" class="headerlink" title="三、JSP"></a>三、JSP</h4><p><strong>本质上是servlet</strong></p>
<p><strong>JSP</strong>（全称<strong>J</strong>ava<strong>S</strong>erver <strong>P</strong>ages）是由Sun公司主导创建的一种动态网页技术标准。JSP部署于网络服务器上，可以响应客户端发送的请求，并根据请求内容动态地生成HTML、xml或其他格式文档的web网页，然后返回给请求者。JSP技术以Java语言作为脚本语言，为用户的Http请求提供服务，并能与服务器上的其它Java程序共同处理复杂的业务需求。</p>
<p>特点：</p>
<ul>
<li>能以模板化的方式简单、高效地添加动态网页内容。</li>
<li>由sun公司编写，语法上与ASP相似</li>
<li>可利用Javabean和标签库技术复用常用的功能代码（设计好的组件容易实现重复利用，减少重复劳动）。标签库不仅带有通用的内置标签JSTL，而且支持可扩展功能的自定义标签。</li>
<li>有良好的工具支持。</li>
<li>继承了Java语言的相对易用性。</li>
<li>继承了Java的跨平台优势，实现“一次编写，处处运行”。因为支持Java及其相关技术的开发平台多，网站开发人员可以选择在最适合自己的系统平台上进行JSP开发；不同环境下开发的JSP项目，在所有客户端上都能顺利访问。</li>
<li>页面中的动（控制变动内容的部分）/静（内容不需变动的部分）区域以分散但又有序的形式组合在一起，能使人更直观地看出页面代码的整体结构，也使得设计页面效果和程序逻辑这2部分工作容易分离（外观视图与逻辑分离）。从而方便分配人员并发挥各自长处，实现高效地分工合作。</li>
<li>可与其它企业级Java技术相互配合。JSP可以只专门负责页面中的数据呈现，实现分层开发。</li>
</ul>
<h3 id="二、web服务器-1"><a href="#二、web服务器-1" class="headerlink" title="二、web服务器"></a>二、web服务器</h3><h4 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat:"></a>Tomcat:</h4><p>Tomcat是Apache 软件基金会（Apache Software Foundation）的Jakarta 项目中的一个核心项目，最新的Servlet 和JSP 规范总是能在Tomcat 中得到体现，Tomcat 5支持最新的Servlet 2.4 和JSP 2.0 规范。因为Tomcat 技术先进、性能稳定，而且免费，因而深受Java 爱好者的喜爱并得到了部分软件开发商的认可，成为目前比较流行的Web 应用服务器。</p>
<p>Tomcat 服务器是一个免费的开放源代码的Web 应用服务器，属于轻量级应用<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%9C%8D%E5%8A%A1%E5%99%A8">服务器</a>，在中小型系统和并发访问用户不是很多的场合下被普遍使用，是开发和调试JSP 程序的首选。对于一个初学者来说，可以这样认为，当在一台机器上配置好Apache 服务器，可利用它响应<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/HTML">HTML</a>（<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%A0%87%E5%87%86%E9%80%9A%E7%94%A8%E6%A0%87%E8%AE%B0%E8%AF%AD%E8%A8%80/6805073">标准通用标记语言</a>下的一个应用）页面的访问请求。实际上Tomcat是Apache 服务器的扩展，但运行时它是独立运行的，所以当你运行tomcat 时，它实际上作为一个与Apache 独立的进程单独运行的。</p>
<p>诀窍是，当配置正确时，Apache 为HTML页面服务，而Tomcat 实际上运行JSP 页面和Servlet。另外，Tomcat和<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/IIS">IIS</a>等Web服务器一样，具有处理HTML页面的功能，<strong>另外它还是一个Servlet和JSP容器</strong>，独立的Servlet容器是Tomcat的默认模式。不过，Tomcat处理静态<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/HTML">HTML</a>的能力不如Apache服务器。目前Tomcat最新版本为9.0.37<strong>。</strong></p>
<h2 id="三、tomcat"><a href="#三、tomcat" class="headerlink" title="三、tomcat"></a>三、tomcat</h2><h4 id="一、安装Tomcat"><a href="#一、安装Tomcat" class="headerlink" title="一、安装Tomcat"></a>一、安装Tomcat</h4><p><img src="C:\Users\莫松\AppData\Roaming\Typora\typora-user-images\image-20200723124139128.png" alt="image-20200723124139128"></p>
<p>目录的意义：</p>
<ul>
<li>Bin:启动和关闭等一系列文件</li>
<li>conf:配置文件</li>
<li>lib:很多需要的jar包</li>
<li>logs:日志文件</li>
<li>Temp:临时文件</li>
<li>webApps:服务器读取文件的存放位置</li>
</ul>
<h4 id="二、配置文件"><a href="#二、配置文件" class="headerlink" title="二、配置文件"></a>二、配置文件</h4><p><strong>位置：apache-tomcat-9.0.37\conf\server.xml</strong></p>
<h5 id="1-更改设备的端口号"><a href="#1-更改设备的端口号" class="headerlink" title="1.更改设备的端口号"></a>1.更改设备的端口号</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> 常见的端口号：</span></span><br><span class="line"><span class="comment">Tomcat：8080；</span></span><br><span class="line"><span class="comment">MySQL：3306；</span></span><br><span class="line"><span class="comment">https:443;</span></span><br><span class="line"><span class="comment">http:80;</span></span><br><span class="line"><span class="comment">-&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-配置主机名称"><a href="#2-配置主机名称" class="headerlink" title="2.配置主机名称"></a>2.配置主机名称</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Host</span> <span class="attr">name</span>=<span class="string">&quot;localhost&quot;</span>  <span class="attr">appBase</span>=<span class="string">&quot;webapps&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">unpackWARs</span>=<span class="string">&quot;true&quot;</span> <span class="attr">autoDeploy</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 这里改了还要去改Windows 下面的host文件-&gt;</span></span><br></pre></td></tr></table></figure>

<p>默认的主机名：localhost或者127.0.0.1；</p>
<p>默认的访问文件夹：webapps；</p>
<p><strong>一个网站如何访问：</strong></p>
<p>1.输入一个域名，然后搜索</p>
<p>2.域名解析</p>
<ul>
<li>先在本机上找，找到就返回相应的地址映射 本机地址配置：C:\Windows\System32\drivers\etc</li>
<li>如果本机没有，那么就去<strong>DNS</strong>上去找，有的话，返回IP地址和端口号等信息。没有的话，就会找不到。</li>
</ul>
<p><strong>DNS：所有域名的管理的一个地方</strong></p>
<h4 id="三、如何发布一个网站"><a href="#三、如何发布一个网站" class="headerlink" title="三、如何发布一个网站"></a>三、如何发布一个网站</h4><p>Tomcat：</p>
<p>先将自己的项目导入tomcat下面的webapps目录下，通过域名+项目名来访问。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#必须有的文件是一个web-inf文件夹，里面的web.xml文件 这是一个配置文件，配置网站信息的,以后还会有classes(java程序)和lib(依赖的jar包)；</span></span><br><span class="line"><span class="comment">#还有一个网页或者其他</span></span><br><span class="line"><span class="comment">#static摆放网页的资源文件，可以正常加载</span></span><br></pre></td></tr></table></figure>

<h2 id="四、HTTP"><a href="#四、HTTP" class="headerlink" title="四、HTTP"></a>四、HTTP</h2><h4 id="一、什么是HTTP"><a href="#一、什么是HTTP" class="headerlink" title="一、什么是HTTP"></a>一、什么是HTTP</h4><p><strong>http（超文本文件传输协议）是一个简单的请求-响应协议，它通常运行在TCP之上。</strong></p>
<h4 id="二、HTTP请求（百度）"><a href="#二、HTTP请求（百度）" class="headerlink" title="二、HTTP请求（百度）"></a>二、HTTP请求（百度）</h4><p>客户端=&gt;发出请求=&gt;服务器</p>
<h5 id="1-请求行"><a href="#1-请求行" class="headerlink" title="1.请求行"></a>1.请求行</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Request URL: https://www.baidu.com/ <span class="comment">#请求的域名</span></span><br><span class="line">Request Method: GET  <span class="comment">#请求方式 GET和POST</span></span><br><span class="line">Status Code: 200 OK <span class="comment">#状态码</span></span><br><span class="line">Remote Address: 14.215.177.38:443 <span class="comment">#实际上的IP地址和端口</span></span><br></pre></td></tr></table></figure>

<p><strong>请求方式：</strong></p>
<ul>
<li><strong>GET：请求携带的数据比较少，大小有限制，会在访问的URL上面显示数据信息，不安全，但是高效</strong></li>
<li><strong>POST:请求携带的数据没有限制，大小没有限制，不会在访问的URL上面显示数据信息，安全，但是不高效</strong></li>
</ul>
<h5 id="2-消息体"><a href="#2-消息体" class="headerlink" title="2.消息体"></a>2.消息体</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=<span class="number">0.9</span>,image/webp,image/apng,<span class="comment">//告诉浏览器他支持的数据类型</span></span><br><span class="line">Accept-Encoding: gzip, deflate, br<span class="comment">//编码</span></span><br><span class="line">Accept-Language: zh-CN,zh;q=<span class="number">0.9</span><span class="comment">//语言</span></span><br><span class="line">Cache-Control: max-age=<span class="number">0</span> <span class="comment">//缓存控制</span></span><br><span class="line">Connection: keep-alive <span class="comment">//告诉浏览器请求完成后是不是断开连接，如果断开的话，下一次再要访问还要再次请求全部资源</span></span><br><span class="line">Host: www.baidu.com<span class="comment">//主机</span></span><br></pre></td></tr></table></figure>



<h4 id="三、HTTP响应（百度）"><a href="#三、HTTP响应（百度）" class="headerlink" title="三、HTTP响应（百度）"></a>三、HTTP响应（百度）</h4><p>服务器=&gt;发出相应=&gt;客户端</p>
<h5 id="1-响应体"><a href="#1-响应体" class="headerlink" title="1.响应体"></a>1.响应体</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Cache-Control: <span class="keyword">private</span><span class="comment">//缓存控制</span></span><br><span class="line">Connection: keep-alive <span class="comment">//告诉浏览器响应完成后是不是断开连接，如果断开的话，下一次再要访问还要再次请求全部资源</span></span><br><span class="line">Content-Encoding: gzip<span class="comment">//编码</span></span><br><span class="line">Content-Type: text/html;<span class="comment">//类型</span></span><br><span class="line">charset=utf-<span class="number">8</span><span class="comment">//编码</span></span><br></pre></td></tr></table></figure>

<h5 id="2-响应状态码"><a href="#2-响应状态码" class="headerlink" title="2.响应状态码"></a>2.响应状态码</h5><p>200:响应成功</p>
<p>3XX：重定向</p>
<p>4XX：失败，资源找不到</p>
<p>5XX：服务器错误  502网关错误</p>
<h2 id="五、Maven（-约定大于配置-）"><a href="#五、Maven（-约定大于配置-）" class="headerlink" title="五、Maven（==约定大于配置==）"></a>五、Maven（==约定大于配置==）</h2><p>用途：</p>
<ol>
<li>再写Java程序的时候，有的时候要导入大量的jar包，我们要导入</li>
<li>我们想要一个东西来帮我们自动导包</li>
</ol>
<h3 id="一、环境变量的配置"><a href="#一、环境变量的配置" class="headerlink" title="一、环境变量的配置"></a>一、环境变量的配置</h3><ol>
<li>配置M2_HOME： 安装maven的bin目录下</li>
<li>配置MAVEN_HOME：安装maven的目录</li>
<li>在path下面配置MAVEN_HOME的bin目录；就是M2_HOME的位置</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#配置成功后</span></span><br><span class="line">Maven home: D:\JAVA\apache-maven-3.6.3-bin\apache-maven-3.6.3\bin\..</span><br><span class="line">Java version: 9.0.4, vendor: Oracle Corporation, runtime: D:\JAVA\jdk</span><br><span class="line">Default locale: zh_CN, platform encoding: GBK</span><br><span class="line">OS name: <span class="string">&quot;windows 10&quot;</span>, version: <span class="string">&quot;10.0&quot;</span>, arch: <span class="string">&quot;amd64&quot;</span>, family: <span class="string">&quot;windows&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="二、阿里云镜像配置"><a href="#二、阿里云镜像配置" class="headerlink" title="二、阿里云镜像配置"></a>二、阿里云镜像配置</h3><p><strong>配置setting.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="三、本地仓库"><a href="#三、本地仓库" class="headerlink" title="三、本地仓库"></a>三、本地仓库</h3><p>自己建一个文件夹在加进去</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>D:\JAVA\apache-maven-3.6.3-bin\apache-maven-3.6.3\maven_repo<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="四、ideal使用maven"><a href="#四、ideal使用maven" class="headerlink" title="四、ideal使用maven"></a>四、ideal使用maven</h3><p><strong>1.新建一个maven目录创建一个maven项目，可以选择有模板和没模版的；二者的区别也不一样。</strong></p>
<p><img src="C:\Users\莫松\AppData\Roaming\Typora\typora-user-images\image-20200724134718443.png" alt="image-20200724134718443"></p>
<p><img src="C:\Users\莫松\AppData\Roaming\Typora\typora-user-images\image-20200724135123957.png" alt="image-20200724135123957"></p>
<p><img src="C:\Users\莫松\AppData\Roaming\Typora\typora-user-images\image-20200724140517641.png" alt="image-20200724140517641"></p>
<p><strong>2.在创建的maven web模板中加入Java（resource root）和resources（resource root）;</strong></p>
<p><strong>3.配置tomcat，在ideal中</strong></p>
<p><img src="C:\Users\莫松\AppData\Roaming\Typora\typora-user-images\image-20200724170428914.png" alt="image-20200724170428914"></p>
<p><strong>Warning: No artifacts marked for deployment</strong>：警告：没有标记为部署的项目，要添加一个项目</p>
<p><strong>4.启动Tomcat</strong></p>
<p><img src="C:\Users\莫松\AppData\Roaming\Typora\typora-user-images\image-20200724171302317.png" alt="image-20200724171302317"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/Saxon_web_maven_war/ <span class="comment">&lt;!-- 配置完的就是显示后缀名-&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>5.pom.xml（pom文件）</strong></p>
<p><strong>maven的核心文件</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 刚才配置的GAV--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Saxon_web_maven<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--jar:java 程序的包</span></span><br><span class="line"><span class="comment">    war:javaweb 应用的包--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  自己设置的名字--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>Saxon_web_maven Maven Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- FIXME change it to the project&#x27;s website --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://www.example.com<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    默认的构建编码--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    编码版本--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--项目依赖--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>   <span class="comment">&lt;!--    具体依赖的包--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--以后用要用的包 可以连他依赖的包一起下下来 &lt;dependency&gt; &lt;/dependency&gt; 用这个包起来的 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>Saxon_web_maven<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span><span class="comment">&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-clean-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.22.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-install-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>由于maven的约定大于配置，所以我们在Java文件夹上面如果写的文件不是Java文件，就导不出去。需要在build中配置一下resource文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>修改项目默认生成的文件夹WEB-INF里面的web.xml让版本提高，更好的一个测试环境，不是target</strong></p>
<p>原版：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">web-app</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta"> <span class="meta-string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="meta-string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>更改可以参考tomcat的web.xml</p>
<h3 id="五、maven仓库"><a href="#五、maven仓库" class="headerlink" title="五、maven仓库"></a>五、maven仓库</h3><p>第一次使用某一个包的时候，他没在我们本地的仓库中，我们就要去网上的maven仓库寻找我们要找的资源</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>   <span class="comment">&lt;!--    具体依赖的包--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="六、使用"><a href="#六、使用" class="headerlink" title="六、使用"></a>六、使用</h2><h5 id="1-先写出一个java程序"><a href="#1-先写出一个java程序" class="headerlink" title="1.先写出一个java程序"></a>1.先写出一个java程序</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        response.setContentType (<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">        response.setCharacterEncoding (<span class="string">&quot;GBK&quot;</span>);</span><br><span class="line">        PrintWriter out = response.getWriter ()；</span><br><span class="line">        out.println (<span class="string">&quot;&lt;html&gt;&quot;</span>);</span><br><span class="line">        out.println (<span class="string">&quot;&lt;head&gt;&quot;</span>);</span><br><span class="line">        out.println (<span class="string">&quot;&lt;title&gt;Hello Beauty!&lt;/title&gt;&quot;</span>);<span class="comment">//如果是中文，编码不同会导致乱码，可以在Java中设置编码</span></span><br><span class="line">        out.println (<span class="string">&quot;&lt;/head&gt;&quot;</span>);</span><br><span class="line">        out.println (<span class="string">&quot;&lt;body&gt;&quot;</span>);</span><br><span class="line">        out.println (<span class="string">&quot;&lt;h1&gt;Hello beauty!&lt;/h1&gt;&quot;</span>);<span class="comment">//如果是中文，编码不同会导致乱码</span></span><br><span class="line">        out.println (<span class="string">&quot;&lt;/body&gt;&quot;</span>);</span><br><span class="line">        out.println (<span class="string">&quot;&lt;/html&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-修改webaapps中的web-xml文件"><a href="#2-修改webaapps中的web-xml文件" class="headerlink" title="2.修改webaapps中的web.xml文件"></a>2.修改webaapps中的web.xml文件</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee</span></span></span><br><span class="line"><span class="tag"><span class="string">                      http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">metadata-complete</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  申请一个servlet 指向一个文件--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>s<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>HelloWorld<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  与一个    &lt;servlet-name&gt;&lt;/servlet-name&gt; 建立一个连接，用url访问数据 一队建立一个连接</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>s<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/saxon<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span><span class="comment">&lt;!-- 这个就是等下访问的地址，在项目名后面加上的额外部分--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3-测试"><a href="#3-测试" class="headerlink" title="3.测试"></a>3.测试</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/Saxon_web_maven_war; 默认访问webapps下面的index.jsp;</span><br><span class="line">http://localhost:8080/Saxon_web_maven_war/saxon; 加上上面的名字可以访问class文件，如果要想要访问其他的文件，那么直接写下webapps，加上文件名直接访问</span><br></pre></td></tr></table></figure>

<h2 id="七、servlet"><a href="#七、servlet" class="headerlink" title="七、servlet"></a>七、servlet</h2><h3 id="一、使用"><a href="#一、使用" class="headerlink" title="一、使用"></a>一、使用</h3><h5 id="1-建立一个普通的maven项目，不加模板的项目。删除src文件这样就可以在这个项目下建立很多的子项目"><a href="#1-建立一个普通的maven项目，不加模板的项目。删除src文件这样就可以在这个项目下建立很多的子项目" class="headerlink" title="1.建立一个普通的maven项目，不加模板的项目。删除src文件这样就可以在这个项目下建立很多的子项目"></a>1.建立一个普通的maven项目，不加模板的项目。删除src文件这样就可以在这个项目下建立很多的子项目</h5><h5 id="2-建立一个子项目，子项目的pom-xml就会有父项目的信息"><a href="#2-建立一个子项目，子项目的pom-xml就会有父项目的信息" class="headerlink" title="2.建立一个子项目，子项目的pom.xml就会有父项目的信息"></a>2.建立一个子项目，子项目的pom.xml就会有父项目的信息</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Saxon_01_servlet<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>父项目中就会添加一个子项目信息</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>Saxon_Servlet_Son_01<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>建项目吗?父子局</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">son extends father</span><br></pre></td></tr></table></figure>

<h5 id="3-环境优化"><a href="#3-环境优化" class="headerlink" title="3.环境优化"></a>3.环境优化</h5><ul>
<li>配置web.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee</span></span></span><br><span class="line"><span class="tag"><span class="string">                      http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">metadata-complete</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>优化结构，加上一些该加上的文件夹 Java ,resources</li>
</ul>
<h5 id="4-编写第一个servlet程序"><a href="#4-编写第一个servlet程序" class="headerlink" title="4.编写第一个servlet程序"></a>4.编写第一个servlet程序</h5><p><strong>sun公司的servlet的实现类：HttpServlet,GenericServlet</strong></p>
<ol>
<li>先创建一个普通的类</li>
<li>这个类去继承servlet的实现类</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//继承HttpServlet</span></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//HttpServlet继承GenericServlet</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpServlet</span> <span class="keyword">extends</span> <span class="title">GenericServlet</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//GenericServlet实现Servlet</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span>, <span class="title">ServletConfig</span>, <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//servlet就是一个接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig var1)</span> <span class="keyword">throws</span> ServletException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">ServletConfig <span class="title">getServletConfig</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest var1, ServletResponse var2)</span> <span class="keyword">throws</span> ServletException, IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">getServletInfo</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.实现父类的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.ServletSecurity;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        PrintWriter writer = resp.getWriter ();</span><br><span class="line">        writer.print (<span class="string">&quot;Hello, I am Saxon&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>4.编写servlet地址映射</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>a<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.saxon.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>a<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/saxon<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>5.启动tomcat调试</p>
<h3 id="二、原理："><a href="#二、原理：" class="headerlink" title="二、原理："></a>二、原理：</h3><p>在我们第一次使用浏览器加载项目时，项目会生成一个Target目录。当浏览器向客户端发出请求的时候，如果是第一次加载，那么就会去加载servlet，如果不是的话，就由web容器发出请求，请求具体访问我们的servlet的service方法。结束后在返还一个响应信息，web容器在返回一个响应给浏览器；（接收并处理要求和返回响应信息）</p>
<h3 id="三、servlet-mapping"><a href="#三、servlet-mapping" class="headerlink" title="三、servlet mapping"></a>三、servlet mapping</h3><h4 id="一、一个对应一个"><a href="#一、一个对应一个" class="headerlink" title="一、一个对应一个"></a>一、一个对应一个</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>a<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.saxon.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>a<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/saxon<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="二、一个对应多个"><a href="#二、一个对应多个" class="headerlink" title="二、一个对应多个"></a>二、一个对应多个</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>a<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.saxon.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>a<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/saxon<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>a<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/saxon2<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>a<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/saxon3<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>a<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/saxon4<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="三、一个对应所有的映射"><a href="#三、一个对应所有的映射" class="headerlink" title="三、一个对应所有的映射"></a>三、一个对应所有的映射</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 就是在路径下面加上一个*--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>a<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.saxon.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>a<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/saxon/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="四、修改默认请求的路径"><a href="#四、修改默认请求的路径" class="headerlink" title="四、修改默认请求的路径"></a>四、修改默认请求的路径</h4><p>默认访问的不是jsp了，而是我们绑定的servlet</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>a<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.saxon.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>a<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="五、固定的文件后缀可以访问"><a href="#五、固定的文件后缀可以访问" class="headerlink" title="五、固定的文件后缀可以访问"></a>五、固定的文件后缀可以访问</h4><p>*.saxon的前后不可以加任何的其他字，不然会报错；</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>a<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.saxon.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>a<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.saxon<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Caused by: java.lang.IllegalArgumentException: servlet鏄犲皠涓殑&lt;url pattern&gt;[*.saxon/<span class="number">2</span>]鏃犳晥</span><br></pre></td></tr></table></figure>

<h3 id="四、ServletContext"><a href="#四、ServletContext" class="headerlink" title="四、ServletContext"></a>四、ServletContext</h3><h4 id="一、含义"><a href="#一、含义" class="headerlink" title="一、含义"></a>一、含义</h4><p>servletContext接口是Servlet中最大的一个接口，呈现了web应用的Servlet视图。**==ServletContext实例是通过 getServletContext()方法获得的==<strong>，由于HttpServlet继承GenericServlet的关系，GenericServlet类和HttpServlet类同时具有该方法。</strong>==这是在servlet之上的一层结构，等级高一级==**     每个web应用都会有一个<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/ServletContext"><strong>ServletContext</strong></a>对象与之关联</p>
<h4 id="二、测试servlet之间的通信"><a href="#二、测试servlet之间的通信" class="headerlink" title="二、测试servlet之间的通信"></a>二、测试servlet之间的通信</h4><p>1.上传</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">send</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        ServletContext context = <span class="keyword">this</span>.getServletContext ();</span><br><span class="line">        context.setAttribute (<span class="string">&quot;saxon&quot;</span>,<span class="string">&quot;saxon 是帅哥&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.接收</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">get</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        ServletContext context = <span class="keyword">this</span>.getServletContext ();</span><br><span class="line">        String saxon = (String)context.getAttribute (<span class="string">&quot;saxon&quot;</span>);</span><br><span class="line">        resp.setCharacterEncoding (<span class="string">&quot;utf-8&quot;</span>);<span class="comment">//配置编码</span></span><br><span class="line">        resp.setContentType (<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">        resp.getWriter ().print (saxon);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3.配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>get<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.saxon.servlet.get<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>get<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/get<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>send<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.saxon.servlet.send<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>send<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/send<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>要先放入在接收，才会显示结果</p>
<h4 id="三、获得初始化参数"><a href="#三、获得初始化参数" class="headerlink" title="三、获得初始化参数"></a>三、获得初始化参数</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GP</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        ServletContext context = <span class="keyword">this</span>.getServletContext ();</span><br><span class="line">        String saxon = context.getInitParameter (<span class="string">&quot;saxon&quot;</span>);</span><br><span class="line">        resp.getWriter ().print (saxon);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>saxon<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>jdbc:mysql://saxon:3306/test<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>gp<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.saxon.servlet.GP<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>gp<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/gp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="四、请求转发"><a href="#四、请求转发" class="headerlink" title="四、请求转发"></a>四、请求转发</h4><p>含义：就是在当前页面下跳转到另一个页面。servlet之间的跳转；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.RequestDispatcher;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Skip</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        ServletContext context = <span class="keyword">this</span>.getServletContext ();</span><br><span class="line">        RequestDispatcher r = context.getRequestDispatcher (<span class="string">&quot;/gp&quot;</span>);<span class="comment">//写入要跳转的页面的url-pattern</span></span><br><span class="line">        r.forward (req,resp);<span class="comment">//    void forward(ServletRequest var1, ServletResponse var2) 一个请求，一个响应</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">       doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>skip<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.saxon.servlet.Skip<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>skip<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/skip<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>tips</strong>:zap::我们虽然跳到了其他的页面但是地址栏还是当前的地址，不会变；这就是与重定向的区别。他的<strong>Status Code</strong>是200；</p>
<h4 id="五、读取配置文件"><a href="#五、读取配置文件" class="headerlink" title="五、读取配置文件"></a>五、读取配置文件</h4><p>1.写一个配置文件</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">username</span>=<span class="string">saxon</span></span><br><span class="line"><span class="attr">pwd</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure>

<p>2.编写测试servlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Properties_Servlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println (<span class="keyword">this</span>.getServletContext ().getContextPath ());<span class="comment">//Saxon_Servlet_Son_02_war</span></span><br><span class="line">        System.out.println (<span class="string">&quot;start***************************&quot;</span>);</span><br><span class="line">        InputStream is = <span class="keyword">this</span>.getServletContext ().getResourceAsStream (<span class="string">&quot;/WEB-INF/classes/lover.properties&quot;</span>);<span class="comment">//注意路径</span></span><br><span class="line">        Properties prop = <span class="keyword">new</span> Properties ();</span><br><span class="line">        prop.load (is);</span><br><span class="line">        String username = prop.getProperty (<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String pwd = prop.getProperty (<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        resp.getWriter ().print (username + <span class="string">&quot;:&quot;</span> + pwd);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>由于当前servletcontext是在/Saxon_Servlet_Son_02_war目录下，我们也知道war包就是一个打包的web程序。所以我们的路径前面加上的==/==表示当前路径。我们在resource下面写的包就会到WEB-INF/classes/包下，如果我们将配置文件写在了Java目录中，我们可以在当前项目的文件pom.xml中加入一段代码；</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span><span class="comment">&lt;!--你要导出资源的文件夹--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span><span class="comment">&lt;!-- 导出资源的类型--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3.将这一个servlet加入web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>prop<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.saxon.servlet.Properties_Servlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>prop<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/prop<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4.启动tomcat，测试；</p>
<h2 id="八、Response"><a href="#八、Response" class="headerlink" title="八、Response"></a>八、Response</h2><h4 id="一、下载文件"><a href="#一、下载文件" class="headerlink" title="一、下载文件"></a>一、下载文件</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletOutputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DownLoading</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1.确定位置和名字</span></span><br><span class="line">        String location = <span class="string">&quot;..\\1.png&quot;</span>      <span class="comment">//具体的地址绝对地址;</span></span><br><span class="line">        String filename = location.substring (location.lastIndexOf (<span class="string">&quot;\\&quot;</span>) + <span class="number">1</span>);</span><br><span class="line">        <span class="comment">//2.设置传输的头文件</span></span><br><span class="line">        resp.setHeader (<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment; filename=&quot;</span> + filename);<span class="comment">//下载页面的文件名，可以在下载页面手动改，默认的话就是。.txt;</span></span><br><span class="line">        <span class="comment">//3.建立缓冲区</span></span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">//4.将下载文件变成输入流</span></span><br><span class="line">        FileInputStream in = <span class="keyword">new</span> FileInputStream (location);</span><br><span class="line">        <span class="comment">//5.获得输出流是，下载</span></span><br><span class="line">        ServletOutputStream out = resp.getOutputStream ();</span><br><span class="line">        <span class="comment">//in.read (buffer) 将文件读取到缓存中</span></span><br><span class="line">        <span class="keyword">while</span> (in.read (buffer) != - <span class="number">1</span>) &#123;</span><br><span class="line">            out.write (buffer, <span class="number">0</span>, len);<span class="comment">//将这个缓存给客户端，响应</span></span><br><span class="line">        &#125;</span><br><span class="line">        out.close ();</span><br><span class="line">        in.close ();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="二、验证码的实现"><a href="#二、验证码的实现" class="headerlink" title="二、验证码的实现"></a>二、验证码的实现</h4><p>1.测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheckCode</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        resp.setHeader (<span class="string">&quot;refresh&quot;</span>, <span class="string">&quot;5&quot;</span>);<span class="comment">//刷新时间</span></span><br><span class="line">        <span class="comment">//图片的大小。</span></span><br><span class="line">        BufferedImage image = <span class="keyword">new</span> BufferedImage (<span class="number">80</span>, <span class="number">20</span>, BufferedImage.TYPE_INT_RGB);</span><br><span class="line">        Graphics2D pen = (Graphics2D) image.getGraphics ();</span><br><span class="line">        <span class="comment">//对图片进行填充</span></span><br><span class="line">        pen.setColor (Color.black);</span><br><span class="line">        pen.fillRect (<span class="number">0</span>,<span class="number">0</span>,<span class="number">80</span>,<span class="number">20</span>);</span><br><span class="line">        <span class="comment">//在图片中写入文字</span></span><br><span class="line">        pen.setColor (Color.white);</span><br><span class="line">        pen.setFont (<span class="keyword">new</span> Font (<span class="keyword">null</span>,Font.BOLD,<span class="number">20</span>));</span><br><span class="line">        pen.drawString (Num (),<span class="number">0</span>,<span class="number">20</span>);</span><br><span class="line">        <span class="comment">//浏览器的读取形式</span></span><br><span class="line">        resp.setContentType (<span class="string">&quot;image/jpeg&quot;</span>);</span><br><span class="line">        <span class="comment">//缓存</span></span><br><span class="line">        resp.setDateHeader (<span class="string">&quot;expires&quot;</span>,-<span class="number">1</span>);</span><br><span class="line">        resp.setHeader (<span class="string">&quot;Cache-Control&quot;</span>,<span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">        resp.setHeader (<span class="string">&quot;pragma&quot;</span>,<span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">        <span class="comment">//图片交给浏览器</span></span><br><span class="line">        ImageIO.write (image,<span class="string">&quot;jpeg&quot;</span>,resp.getOutputStream ());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">Num</span><span class="params">()</span></span>&#123;</span><br><span class="line">        StringBuffer str=<span class="keyword">new</span> StringBuffer ();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">7</span> ; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> i1 = <span class="keyword">new</span> Random ().nextInt (<span class="number">9</span>);</span><br><span class="line">            str.append (i1);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> str.toString ();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="C:\Users\莫松\AppData\Roaming\Typora\typora-user-images\image-20200726143405536.png" alt="image-20200726143405536" style="zoom: 80%;" />

<p>我们可以设置上面的相关的信息；</p>
<h4 id="三、实现重定向"><a href="#三、实现重定向" class="headerlink" title="三、实现重定向"></a>三、实现重定向</h4><h5 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h5><p>重定向：当你想要小美的QQ号，但你不知道如何要她的QQ号，所以你去找认识小美QQ号的小札，小札叫你自己去，于是你就自己去；</p>
<p>转发：当你想要小美的QQ号，但是你不知道如何要她的QQ号，所以你就去找认识小美QQ号的小札，小札帮你去要，要到了再给你；</p>
<p><strong>比较</strong>：重定向和转发</p>
<p>相同点：都是页面的跳转；</p>
<p>不同点：重定向的url地址发生了变化，但是转发没有。他们的状态码也不一样。重定向的是3开头的。转发是200；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//转发</span></span><br><span class="line">ServletContext context = <span class="keyword">this</span>.getServletContext ();</span><br><span class="line">RequestDispatcher r = context.getRequestDispatcher (<span class="string">&quot;/gp&quot;</span>);<span class="comment">//写入要跳转的页面的url-pattern</span></span><br><span class="line"><span class="comment">//重定向</span></span><br><span class="line">String contextPath = <span class="keyword">this</span>.getServletContext ().getContextPath ();<span class="comment">//当前项目的地址</span></span><br><span class="line">resp.sendRedirect (contextPath+<span class="string">&quot;/hello.html&quot;</span>);</span><br></pre></td></tr></table></figure>

<h5 id="2-测试"><a href="#2-测试" class="headerlink" title="2.测试"></a>2.测试</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedirectServlet</span>  <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String contextPath = <span class="keyword">this</span>.getServletContext ().getContextPath ();<span class="comment">//当前项目的地址</span></span><br><span class="line">        resp.sendRedirect (contextPath+<span class="string">&quot;/hello.html&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="九、request"><a href="#九、request" class="headerlink" title="九、request"></a>九、request</h2><h4 id="一、试一下"><a href="#一、试一下" class="headerlink" title="一、试一下"></a>一、试一下</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">requestDemo</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String username = req.getParameter (<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String password = req.getParameter (<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        String path = <span class="keyword">this</span>.getServletContext ().getContextPath ();</span><br><span class="line">        resp.sendRedirect (path+<span class="string">&quot;/success.html&quot;</span>);<span class="comment">//选择重定向的去处</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;title&gt;test&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;Hello World!&lt;/h2&gt;</span><br><span class="line">&lt;%-- pageContext.request.contextPath 当前目录/url pattern --%&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/re&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;p&gt;&lt;label&gt;username：&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;/label&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&lt;label&gt;password：&lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;&lt;/label&gt;&lt;/p&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>successful<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>通过代码实现密码输入，成功跳转成功。</p>
<h4 id="二、获得前端信息"><a href="#二、获得前端信息" class="headerlink" title="二、获得前端信息"></a>二、获得前端信息</h4><p>1.接收前端信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ISO_8859_1 默认编码</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">requestDemo</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        req.setCharacterEncoding (<span class="string">&quot;utf-8&quot;</span>);<span class="comment">//解决乱码问题</span></span><br><span class="line">        String username = req.getParameter (<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String[] hobbies = req.getParameterValues (<span class="string">&quot;hobbies&quot;</span>);</span><br><span class="line">        System.out.println (Arrays.toString (hobbies));</span><br><span class="line">        String path = <span class="keyword">this</span>.getServletContext ().getContextPath ();</span><br><span class="line">        resp.sendRedirect (path + <span class="string">&quot;/new.html&quot;</span>);<span class="comment">//302</span></span><br><span class="line">        <span class="comment">//req.getRequestDispatcher (&quot;/sucess.jsp&quot;).forward (req,resp);</span></span><br><span class="line">        resp.setCharacterEncoding (<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.提交页</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;&lt;%解决界面乱码问题%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;Hello World!&lt;/h2&gt;</span><br><span class="line">&lt;%--pageContext.request.contextPath 当前目录/url pattern--%&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/re&quot;</span> method=<span class="string">&quot;post&quot;</span> &gt;</span><br><span class="line">    &lt;p&gt;&lt;label&gt;username：&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;/label&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&lt;label&gt;password：&lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;&lt;/label&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;爱好：</span><br><span class="line">        &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbies&quot;</span> value=<span class="string">&quot;篮球&quot;</span> required&gt;篮球</span><br><span class="line">        &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbies&quot;</span> value=<span class="string">&quot;游戏&quot;</span>&gt;游戏</span><br><span class="line">        &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbies&quot;</span> value=<span class="string">&quot;休息&quot;</span>&gt;休息</span><br><span class="line">        &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbies&quot;</span> value=<span class="string">&quot;唱歌&quot;</span>&gt;唱歌</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3.成功反馈,跳出这个界面</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: saxon</span><br><span class="line">  Date: <span class="number">2020</span>/<span class="number">7</span>/<span class="number">26</span></span><br><span class="line">  Time: <span class="number">20</span>:<span class="number">44</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;successful&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>关于乱码问题：</p>
<p>1.首先是Tomcat 的问题，如果在界面加载控制台出现乱码，就改logging.properties（java.util.logging.ConsoleHandler.encoding = GBK）最后一个有关编码的UTF-8改成GBK;</p>
<p>2.如果是接收的时候出现数据的乱码，就用request.setCharacterEncoding (“utf-8”);就可以了</p>
<p>3.如果实在不行就上网上搜，我是被这个搞崩溃了。然后在改一下配置，花了好久，在我准备卸载的时候，她就好了；</p>
<h2 id="十、cookie-session"><a href="#十、cookie-session" class="headerlink" title="十、cookie session"></a>十、cookie session</h2><h3 id="一、会话"><a href="#一、会话" class="headerlink" title="一、会话"></a>一、会话</h3><h4 id="一、概念"><a href="#一、概念" class="headerlink" title="一、概念"></a>一、概念</h4><p>在计算机术语中，会话是指一个终端用户与交互系统进行通讯的过程，比如从输入账户密码进入操作系统到退出操作系统就是一个会话过程。会话较多用于网络上，TCP的三次握手就创建了一个会话，TCP关闭连接就是关闭会话；</p>
<p><strong>有状态会话：可以在不同的方法调用间保持针对各个客户端的状态与客户端的联系必须被维持，这样做开销要大一些</strong></p>
<h4 id="二、保存会话的两种方式"><a href="#二、保存会话的两种方式" class="headerlink" title="二、保存会话的两种方式"></a>二、保存会话的两种方式</h4><p><strong>cookie</strong>  Cookie是客户端技术，程序把每个用户的数据以cookie的形式写给用户各自的浏览器，当用户使用浏览器再去访问服务器中的web资源时，就会带着各自的数据去，这样web资源处理的就是各自的数据！</p>
<p><strong>session</strong>：Session是服务器端技术，利用这个技术服务器在运行时可以为每一个用户的浏览器绘制创建一个其独享的session对象，由于session为用户浏览器独享，所以用户在访问服务器的web资源时，可以把各自的数据放在各自的session中，当用户再去服务器中的其他web资源时，其它web资源再从用户各自的session中取出数据为用户服务</p>
<h3 id="二、cookie"><a href="#二、cookie" class="headerlink" title="二、cookie"></a>二、cookie</h3><h5 id="1-添加"><a href="#1-添加" class="headerlink" title="1.添加"></a>1.添加</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">cookieDemo</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        req.setCharacterEncoding (<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        resp.setContentType (<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        resp.setCharacterEncoding (<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        Cookie[] cookies = req.getCookies ();</span><br><span class="line">        PrintWriter out = resp.getWriter ();</span><br><span class="line">        <span class="keyword">if</span> (cookies!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">                String name = cookie.getName ();</span><br><span class="line">                <span class="keyword">if</span> (name.equals (<span class="string">&quot;saxon&quot;</span>)) &#123;</span><br><span class="line">                    String value = cookie.getValue ();</span><br><span class="line">                    Date date = <span class="keyword">new</span> Date (Long.parseLong (value));</span><br><span class="line">                    out.print (<span class="string">&quot;你上次来的时间是&quot;</span> + date);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            out.write (<span class="string">&quot;欢迎光临\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        Cookie cookie = <span class="keyword">new</span> Cookie (<span class="string">&quot;saxon&quot;</span>, System.currentTimeMillis () + <span class="string">&quot;&quot;</span>);</span><br><span class="line">        cookie.setMaxAge (<span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>);<span class="comment">//Set-Cookie: saxon=1595912818749; Max-Age=86400; Expires=Wed, 29-Jul-2020 05:06:58 GMT</span></span><br><span class="line">        resp.addCookie (cookie);<span class="comment">//每次都给一个新的cookie,覆盖上一个同名cookie</span></span><br><span class="line">        System.out.println (<span class="string">&quot;********************************&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-删除"><a href="#2-删除" class="headerlink" title="2.删除"></a>2.删除</h5><ul>
<li>不设置日期，直接关闭浏览器，就删除cookie</li>
<li>设置cookie.setMaxAge=0;</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeleteCookie</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        resp.setContentType (<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        Cookie[] cookies = req.getCookies ();</span><br><span class="line">        Cookie new_cookie=<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">            <span class="keyword">if</span> (cookie.getName ().equals (<span class="string">&quot;saxon&quot;</span>))&#123;</span><br><span class="line">                new_cookie=cookie;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (new_cookie!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            new_cookie.setMaxAge (<span class="number">0</span>);</span><br><span class="line">            resp.getWriter ().print (cookie.getName ()+<span class="string">&quot;删除成功&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        resp.addCookie (new_cookie);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3.编码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String str=<span class="string">&quot;删除成功&quot;</span>;</span><br><span class="line">                URLEncoder.encode (str,<span class="string">&quot;GBK&quot;</span>);<span class="comment">//编码</span></span><br><span class="line">                URLDecoder.decode (str,<span class="string">&quot;GBK&quot;</span>);<span class="comment">//解码</span></span><br></pre></td></tr></table></figure>



<h4 id="3-cookie的上限"><a href="#3-cookie的上限" class="headerlink" title="3.cookie的上限"></a>3.cookie的上限</h4><h3 id="三、session"><a href="#三、session" class="headerlink" title="三、session"></a>三、session</h3><h4 id="一、概念-1"><a href="#一、概念-1" class="headerlink" title="一、概念"></a>一、概念</h4><p><strong>session</strong>：Session是服务器端技术，利用这个技术服务器在运行时可以为每一个用户的浏览器绘制创建一个其独享的session对象，由于session为用户浏览器独享，所以用户在访问服务器的web资源时，可以把各自的数据放在各自的session中，当用户再去服务器中的其他web资源时，其它web资源再从用户各自的session中取出数据为用户服务</p>
<p><strong>response.getWriter().print()和response.getWriter().writer（）的区别:</strong></p>
<ul>
<li>response.getWriter().print(),不仅可以打印输出文本格式的（包括html标签），还可以将一个对象以默认的编码方式转换为二进制字节输出</li>
<li>response.getWriter().writer（）,只能打印输出文本格式的（包括html标签），不可以打印对象</li>
</ul>
<h4 id="二、测试"><a href="#二、测试" class="headerlink" title="二、测试"></a>二、测试</h4><h5 id="1-获取session对象，添加节点信息"><a href="#1-获取session对象，添加节点信息" class="headerlink" title="1.获取session对象，添加节点信息"></a>1.获取session对象，添加节点信息</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionDemo</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        req.setCharacterEncoding (<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        resp.setCharacterEncoding (<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        resp.setContentType (<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        HttpSession session = req.getSession ();</span><br><span class="line">        session.setAttribute (<span class="string">&quot;saxon&quot;</span>,<span class="string">&quot;saxon&quot;</span>);<span class="comment">//可以保存一个对象</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (session.isNew ())&#123;</span><br><span class="line">            resp.getWriter ().print (<span class="string">&quot;新创建的session：&quot;</span>+session.getAttribute (<span class="string">&quot;saxon&quot;</span>)+<span class="string">&quot;的ID是&quot;</span>+session.getId ());</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            resp.getWriter ().print (<span class="string">&quot;原来就有的&quot;</span>+session.getAttribute (<span class="string">&quot;saxon&quot;</span>)+<span class="string">&quot;的ID是&quot;</span>+session.getId ());</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="2-获得session的信息"><a href="#2-获得session的信息" class="headerlink" title="2.获得session的信息"></a>2.获得session的信息</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionShow</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//获取指定的节点</span></span><br><span class="line">        HttpSession session = req.getSession ();</span><br><span class="line">        String saxon = (String) session.getAttribute (<span class="string">&quot;saxon&quot;</span>);</span><br><span class="line">        resp.getWriter ().print (saxon);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="3-删除session"><a href="#3-删除session" class="headerlink" title="3.删除session"></a>3.删除session</h5><ul>
<li>在web.xm配置文件会话自动过期</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>1<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span> <span class="comment">&lt;!--单位是分钟--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>利用session.invalidate ();</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionDelete</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        HttpSession session = req.getSession ();</span><br><span class="line">        session.removeAttribute (<span class="string">&quot;saxon&quot;</span>);<span class="comment">//移除保存的数据</span></span><br><span class="line">        session.invalidate ();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



</li>
</ul>
<h4 id="三、session与cookie的区别"><a href="#三、session与cookie的区别" class="headerlink" title="三、session与cookie的区别"></a>三、session与cookie的区别</h4><ul>
<li><strong>cookie:**cookie是把数据写在用户自己的浏览器，交给用户自己保存，</strong>直接把信息交给用户**</li>
<li><strong>session:**把用户的数据写在独立的session里面，交给服务器保管（保存重要信息，节约服务器资源），</strong>交给用户的是一个ID，用户不知道里面的内容，但是可以凭借这个访问服务器的资源资源在服务器**</li>
<li>session由服务器创建，不写也是存在</li>
</ul>
<p>==<strong>使用频繁的信息我们用session保存:例如用户登录信息，购物信息</strong>==</p>
<h2 id="十一、JSP"><a href="#十一、JSP" class="headerlink" title="十一、JSP"></a>十一、JSP</h2><h3 id="一、概念-2"><a href="#一、概念-2" class="headerlink" title="一、概念"></a>一、概念</h3><p>ldea下面的tomcat的目录：C:\Users\adiminstor\AppData\Local\JetBrains</p>
<h5 id="1-jsp的运行原理："><a href="#1-jsp的运行原理：" class="headerlink" title="1.jsp的运行原理："></a>1.<strong>jsp的运行原理：</strong></h5><p><strong>1.jsp</strong>实际上编译后会变成一个class文件，继承了一个类org.apache.jasper.runtime.HttpJspBase;会发现这实际上就是一个servlet类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">index_jsp</span> <span class="keyword">extends</span> <span class="title">org</span>.<span class="title">apache</span>.<span class="title">jasper</span>.<span class="title">runtime</span>.<span class="title">HttpJspBase</span>----&gt;</span></span><br><span class="line"><span class="class">    </span>===&gt;<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpJspBase</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> <span class="keyword">implements</span> <span class="title">HttpJspPage</span></span></span><br></pre></td></tr></table></figure>

<h5 id="2-内置对象"><a href="#2-内置对象" class="headerlink" title="2.内置对象"></a>2.内置对象</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> javax.servlet.jsp.PageContext pageContext;</span><br><span class="line">javax.servlet.http.HttpSession session = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">final</span> javax.servlet.ServletContext application;</span><br><span class="line"><span class="keyword">final</span> javax.servlet.ServletConfig config;</span><br><span class="line">javax.servlet.jsp.JspWriter out = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">final</span> java.lang.Object page = <span class="keyword">this</span>;</span><br><span class="line">javax.servlet.jsp.JspWriter _jspx_out = <span class="keyword">null</span>;</span><br><span class="line">javax.servlet.jsp.PageContext _jspx_page_context = <span class="keyword">null</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="3-运行过程"><a href="#3-运行过程" class="headerlink" title="3.运行过程"></a>3.运行过程</h5><p>用户客户端发出请求，服务器在自己项目内寻找jsp，找到后，先把jsp转换成Java文件，在把Java文件编译成class文件，再交给服务器，由服务器交给用户，那么用户拿到的就是真正的class对象，实际上就是一个servlet；</p>
<p><img src="https://images0.cnblogs.com/blog/776887/201508/091745426439496.png"></p>
<h5 id="4-对比jsp和jsp-java"><a href="#4-对比jsp和jsp-java" class="headerlink" title="4.对比jsp和jsp.java"></a>4.对比jsp和jsp.java</h5><p><strong>jsp</strong>:</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span>  pageEncoding=<span class="string">&quot;utf-8&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;Hello World!&lt;/h2&gt;</span><br><span class="line">&lt;%--pageContext.request.contextPath 当前目录/url pattern--%&gt;</span><br><span class="line">&lt;% String name=<span class="string">&quot;saxon&quot;</span>;%&gt;</span><br><span class="line">name=&lt;%=name%&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/re&quot;</span> method=<span class="string">&quot;get&quot;</span> &gt;</span><br><span class="line">    &lt;p&gt;&lt;label&gt;username：&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;/label&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&lt;label&gt;password：&lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;&lt;/label&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;爱好：</span><br><span class="line">        &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbies&quot;</span> value=<span class="string">&quot;篮球&quot;</span> required&gt;篮球</span><br><span class="line">        &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbies&quot;</span> value=<span class="string">&quot;游戏&quot;</span>&gt;游戏</span><br><span class="line">        &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbies&quot;</span> value=<span class="string">&quot;休息&quot;</span>&gt;休息</span><br><span class="line">        &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbies&quot;</span> value=<span class="string">&quot;唱歌&quot;</span>&gt;唱歌</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);<span class="comment">//识别</span></span><br><span class="line">      pageContext = _jspxFactory.getPageContext(<span class="keyword">this</span>, request, response,</span><br><span class="line">      			<span class="keyword">null</span>, <span class="keyword">true</span>, <span class="number">8192</span>, <span class="keyword">true</span>);</span><br><span class="line">      _jspx_page_context = pageContext;</span><br><span class="line">      application = pageContext.getServletContext();</span><br><span class="line">      config = pageContext.getServletConfig();</span><br><span class="line">      session = pageContext.getSession();</span><br><span class="line">      out = pageContext.getOut();</span><br><span class="line">      _jspx_out = out;</span><br><span class="line"></span><br><span class="line">      out.write(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;&lt;html&gt;\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;&lt;body&gt;\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;&lt;h2&gt;Hello World!&lt;/h2&gt;\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line"> String name=<span class="string">&quot;saxon&quot;</span>;<span class="comment">//我们写的Java代码</span></span><br><span class="line">      out.write(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;name=&quot;</span>);</span><br><span class="line">      out.print(name);<span class="comment">//原样输出</span></span><br><span class="line">      out.write(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;&lt;form action=\&quot;&quot;</span>);</span><br><span class="line">      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;&quot;</span>, java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, <span class="keyword">null</span>));</span><br><span class="line">      out.write(<span class="string">&quot;/re\&quot; method=\&quot;get\&quot; &gt;\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;    &lt;p&gt;&lt;label&gt;username：&lt;input type=\&quot;text\&quot; name=\&quot;username\&quot;&gt;&lt;/label&gt;&lt;/p&gt;\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;    &lt;p&gt;&lt;label&gt;password：&lt;input type=\&quot;password\&quot; name=\&quot;password\&quot;&gt;&lt;/label&gt;&lt;/p&gt;\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;    &lt;p&gt;爱好：\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;        &lt;input type=\&quot;checkbox\&quot; name=\&quot;hobbies\&quot; value=\&quot;篮球\&quot; required&gt;篮球\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;        &lt;input type=\&quot;checkbox\&quot; name=\&quot;hobbies\&quot; value=\&quot;游戏\&quot;&gt;游戏\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;        &lt;input type=\&quot;checkbox\&quot; name=\&quot;hobbies\&quot; value=\&quot;休息\&quot;&gt;休息\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;        &lt;input type=\&quot;checkbox\&quot; name=\&quot;hobbies\&quot; value=\&quot;唱歌\&quot;&gt;唱歌\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;    &lt;/p&gt;\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;    &lt;input type=\&quot;submit\&quot;&gt;\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;&lt;/form&gt;\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;&lt;/body&gt;\n&quot;</span>);</span><br><span class="line">      out.write(<span class="string">&quot;&lt;/html&gt;\n&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>==<strong>通过对比我们明白，如果我们写在jsp中的代码是Java，那么就会原模原样的输出Java代码，如果是html代码就会改写成out.write方法输出到页面上</strong>==</p>
<h3 id="二、基本语法"><a href="#二、基本语法" class="headerlink" title="二、基本语法"></a>二、基本语法</h3><h4 id="一、导入依赖的包"><a href="#一、导入依赖的包" class="headerlink" title="一、导入依赖的包"></a>一、导入依赖的包</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    servlet的依赖包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    jsp的包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp.jstl/jstl-api --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    JSTL的包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp.jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/taglibs/standard --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--   standard标签库--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>standard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="二、基本语法-1"><a href="#二、基本语法-1" class="headerlink" title="二、基本语法"></a>二、基本语法</h4><p>1.表达式(&lt;%=      %&gt;)</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;&lt;%=3%&gt;&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<p>2.jsp脚本片段(&lt;%      %&gt;)</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">1000</span> ; i++) &#123;</span><br><span class="line">        sum+=i;</span><br><span class="line">    &#125;</span><br><span class="line">    out.println (sum);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;hr&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">5</span> ; i++) &#123;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;h1&gt;hello world!&lt;/h1&gt;</span><br><span class="line">&lt;%&#125;    %&gt;</span><br></pre></td></tr></table></figure>

<p>3.jsp声明(&lt;%!    %&gt;)</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%!</span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">&#125;    </span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: saxon</span><br><span class="line">  Date: <span class="number">2020</span>/<span class="number">7</span>/<span class="number">28</span></span><br><span class="line">  Time: <span class="number">21</span>:08</span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;&lt;%=3%&gt;&lt;/h1&gt;</span><br><span class="line">&lt;hr&gt;</span><br><span class="line">&lt;%</span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">1000</span> ; i++) &#123;</span><br><span class="line">        sum+=i;</span><br><span class="line">    &#125;</span><br><span class="line">    out.println (sum);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;hr&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">5</span> ; i++) &#123;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;h1&gt;hello world!&lt;/h1&gt;</span><br><span class="line">&lt;%&#125;    %&gt;</span><br><span class="line">    </span><br><span class="line">&lt;%!</span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">&#125;    </span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>除了声明，编译后会在类的里面，其他的编译了会在service方法里面；</p>
<h3 id="三、jsp指令"><a href="#三、jsp指令" class="headerlink" title="三、jsp指令"></a>三、jsp指令</h3><h5 id="1、配置错误页面"><a href="#1、配置错误页面" class="headerlink" title="1、配置错误页面"></a>1、配置错误页面</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- code要写在location前面--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">error-code</span>&gt;</span>404<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">location</span>&gt;</span>/error/404.jsp<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">error-code</span>&gt;</span>500<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">location</span>&gt;</span>/error/500.jsp<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>404错误界面，没有页面时跳转</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: Saxon</span><br><span class="line">  Date: <span class="number">2020</span>/<span class="number">7</span>/<span class="number">28</span></span><br><span class="line">  Time: <span class="number">22</span>:<span class="number">18</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;404&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;img src=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/images/404.jpg&quot;</span> alt=<span class="string">&quot;404 error&quot;</span>&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>主页面显示：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: Saxon</span><br><span class="line">  Date: <span class="number">2020</span>/<span class="number">7</span>/<span class="number">28</span></span><br><span class="line">  Time: <span class="number">22</span>:<span class="number">16</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;% <span class="keyword">int</span> x=<span class="number">1</span>/<span class="number">0</span>;%&gt; &lt;%--<span class="number">500</span>错误--%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.include标签的区别</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="meta">@include</span> file=<span class="string">&quot;index.jsp&quot;</span>%&gt; </span><br><span class="line">&lt;jsp:include page=<span class="string">&quot;index.jsp&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>&lt;%@include file=”index.jsp”%&gt; ,就是一个页面，把全部的代码用Java写出来，就是out.write();可能出现变量重名的情况</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">out.write(<span class="string">&quot;&lt;html&gt;\r\n&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;&lt;head&gt;\r\n&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;    &lt;title&gt;Title&lt;/title&gt;\r\n&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;&lt;/head&gt;\r\n&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;&lt;body&gt;\r\n&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;&lt;h1&gt;this is my include&lt;/h1&gt;\r\n&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;&lt;/body&gt;\r\n&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;&lt;/html&gt;\r\n&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;&lt;h1&gt;hello world&lt;/h1&gt;\r\n&quot;</span>);</span><br></pre></td></tr></table></figure>



<ul>
<li>&lt;jsp:include page=”index.jsp”/&gt;是页面的拼接，是对象拼在一起，区别就在于如果写Java代码会不会出现变量重名的情况</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    _jspx_imports_packages = <span class="keyword">new</span> java.util.HashSet&lt;&gt;();</span><br><span class="line">    _jspx_imports_packages.add(<span class="string">&quot;javax.servlet&quot;</span>);</span><br><span class="line">    _jspx_imports_packages.add(<span class="string">&quot;java.util&quot;</span>);</span><br><span class="line">    _jspx_imports_packages.add(<span class="string">&quot;javax.servlet.http&quot;</span>);</span><br><span class="line">    _jspx_imports_packages.add(<span class="string">&quot;javax.servlet.jsp&quot;</span>);</span><br><span class="line">    _jspx_imports_classes = <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, <span class="string">&quot;index.jsp&quot;</span>, out, <span class="keyword">false</span>);</span><br></pre></td></tr></table></figure>

<h3 id="四、jsp的四大作用域和9大内置对象"><a href="#四、jsp的四大作用域和9大内置对象" class="headerlink" title="四、jsp的四大作用域和9大内置对象"></a>四、jsp的四大作用域和9大内置对象</h3><h4 id="1-9大内置对象"><a href="#1-9大内置对象" class="headerlink" title="1.9大内置对象"></a>1.9大内置对象</h4><p>1.<strong>PageContext</strong>: javax.servlet.jsp.PageContext  <strong>存储信息</strong><br>2**.reques<strong>t :javax.servlet.http.HttpServletrequest  **存储信息</strong><br>3.<strong>response</strong>: javax.servlet.http.HttpServletResponse <strong>服务器向客户端的回应信息</strong><br>4**.session**: javax.servlet.http.HttpSession  <strong>存储信息</strong><br>5.<strong>application</strong>: javax.servlet.ServletContext  <strong>存储信息</strong><br>6.<strong>config</strong> :javax.servlet.ServletConfig  <strong>配置文件</strong><br>7.<strong>out</strong> :javax.servlet.jsp.jspWriter<br>8.<strong>page</strong> ：不常用<br>9.<strong>exceptio</strong>n java.lang.Throwable <strong>异常</strong></p>
<h4 id="2、四大作用域"><a href="#2、四大作用域" class="headerlink" title="2、四大作用域"></a>2、四大作用域</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pageContext.setAttribute (<span class="string">&quot;NO1&quot;</span>, <span class="string">&quot;saxon1&quot;</span>);</span><br><span class="line">    request.setAttribute (<span class="string">&quot;NO2&quot;</span>, <span class="string">&quot;saxon2&quot;</span>);</span><br><span class="line">    session.setAttribute (<span class="string">&quot;NO3&quot;</span>, <span class="string">&quot;saxon3&quot;</span>);</span><br><span class="line">    application.setAttribute (<span class="string">&quot;NO4&quot;</span>, <span class="string">&quot;saxon4&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>pageContext</strong>：只有当前页面有用，其他页面数据就失效；</li>
<li><strong>request</strong>：只有这个请求页有效；但是转发数据也会被带到新的页面；</li>
<li><strong>session</strong>：在这个浏览器关闭前有效；</li>
<li><strong>application：</strong>只有服务器炸裂时，才会失效；</li>
</ul>
<p>测试：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: Saxon</span><br><span class="line">  Date: <span class="number">2020</span>/<span class="number">7</span>/<span class="number">28</span></span><br><span class="line">  Time: <span class="number">21</span>:08</span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Index&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    pageContext.setAttribute (<span class="string">&quot;NO1&quot;</span>, <span class="string">&quot;saxon1&quot;</span>);</span><br><span class="line">    request.setAttribute (<span class="string">&quot;NO2&quot;</span>, <span class="string">&quot;saxon2&quot;</span>);</span><br><span class="line">    session.setAttribute (<span class="string">&quot;NO3&quot;</span>, <span class="string">&quot;saxon3&quot;</span>);</span><br><span class="line">    application.setAttribute (<span class="string">&quot;NO4&quot;</span>, <span class="string">&quot;saxon4&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    String no1 = (String) pageContext.findAttribute (<span class="string">&quot;No1&quot;</span>);</span><br><span class="line">    String no2 = (String) pageContext.findAttribute (<span class="string">&quot;No2&quot;</span>);</span><br><span class="line">    String no3 = (String) pageContext.findAttribute (<span class="string">&quot;No3&quot;</span>);</span><br><span class="line">    String no4 = (String) pageContext.findAttribute (<span class="string">&quot;No4&quot;</span>);</span><br><span class="line">    String no5 = (String) pageContext.findAttribute (<span class="string">&quot;No2&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;%pageContext.forward(<span class="string">&quot;/Test.jsp&quot;</span>);%&gt;</span><br><span class="line">$&#123;NO1&#125;</span><br><span class="line">$&#123;NO2&#125;</span><br><span class="line">$&#123;NO3&#125;</span><br><span class="line">$&#123;NO4&#125;</span><br><span class="line">$&#123;NO5&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>转发页：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User:Saxon</span><br><span class="line">  Date: <span class="number">2020</span>/<span class="number">7</span>/<span class="number">28</span></span><br><span class="line">  Time: <span class="number">22</span>:<span class="number">16</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;test&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    String no1 = (String) pageContext.findAttribute (<span class="string">&quot;No1&quot;</span>);</span><br><span class="line">    String no2 = (String) pageContext.findAttribute (<span class="string">&quot;No2&quot;</span>);</span><br><span class="line">    String no3 = (String) pageContext.findAttribute (<span class="string">&quot;No3&quot;</span>);</span><br><span class="line">    String no4 = (String) pageContext.findAttribute (<span class="string">&quot;No4&quot;</span>);</span><br><span class="line">    String no5 = (String) pageContext.findAttribute (<span class="string">&quot;No5&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">$&#123;NO1&#125;</span><br><span class="line">$&#123;NO2&#125;</span><br><span class="line">$&#123;NO3&#125;</span><br><span class="line">$&#123;NO4&#125;</span><br><span class="line">$&#123;NO5&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>常见场景：</p>
<p>1.看了一次就不会在看的，例如新闻，可以放在request中</p>
<p>2.用户会一直使用的信息，例如购物车，放在session中</p>
<p>3.这个网页，网站一直要用的，例如，浏览人数，放在application中</p>
<p>4.一些只在当前页面要用到的，就放在pagecontext</p>
<h3 id="五、JSP标签，JSTL标签，EL表达式"><a href="#五、JSP标签，JSTL标签，EL表达式" class="headerlink" title="五、JSP标签，JSTL标签，EL表达式"></a>五、JSP标签，JSTL标签，EL表达式</h3><h4 id="一、JSTL标签"><a href="#一、JSTL标签" class="headerlink" title="一、JSTL标签"></a>一、JSTL标签</h4><p><strong>种类：</strong></p>
<ul>
<li>核心标签</li>
<li>sql标签</li>
<li>xml标签</li>
<li>格式化标签</li>
</ul>
<p>测试一：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;#&quot;</span> method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line">    用户：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;$&#123;param.username&#125;&quot;</span>&gt;</span><br><span class="line">    分数：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;score&quot;</span> value=<span class="string">&quot;$&#123;param.score&#125;&quot;</span>&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>JSTL标签</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;param.username==&#x27;saxon&#x27;&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;saxon&quot;</span>&gt;&lt;!-- 这里的值--&gt;</span><br><span class="line">    &lt;c:out value=<span class="string">&quot;登录成功&quot;</span>/&gt;</span><br><span class="line">    &lt;c:out value=<span class="string">&quot;$&#123;saxon&#125;&quot;</span>/&gt;</span><br><span class="line">&lt;/c:if&gt;</span><br><span class="line">&lt;c:set value=<span class="string">&quot;$&#123;param.score&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;score&quot;</span>/&gt;</span><br><span class="line">    &lt;c:choose&gt;</span><br><span class="line">        &lt;c:when test=<span class="string">&quot;$&#123;score&gt;90&#125;&quot;</span>&gt;</span><br><span class="line">            你的成绩优秀</span><br><span class="line">        &lt;/c:when&gt;</span><br><span class="line">        &lt;c:when test=<span class="string">&quot;$&#123;score&gt;80&#125;&quot;</span>&gt;</span><br><span class="line">            你的成绩一般</span><br><span class="line">        &lt;/c:when&gt;</span><br><span class="line">        &lt;c:when test=<span class="string">&quot;$&#123;score&gt;70&#125;&quot;</span>&gt;</span><br><span class="line">            你的成绩可以</span><br><span class="line">        &lt;/c:when&gt;</span><br><span class="line">        &lt;c:when test=<span class="string">&quot;$&#123;score&gt;60&#125;&quot;</span>&gt;</span><br><span class="line">            你的成绩罪恶</span><br><span class="line">        &lt;/c:when&gt;</span><br><span class="line">    &lt;/c:choose&gt;</span><br></pre></td></tr></table></figure>

<p>java实现：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    <span class="keyword">if</span> (request.getParameter (<span class="string">&quot;username&quot;</span>) != <span class="keyword">null</span> &amp;&amp; request.getParameter (<span class="string">&quot;username&quot;</span>).equals (<span class="string">&quot;saxon&quot;</span>)) &#123;</span><br><span class="line">        out.print (request.getParameter (<span class="string">&quot;username&quot;</span>) + <span class="string">&quot;,欢迎你&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="keyword">if</span> (request.getParameter (<span class="string">&quot;username&quot;</span>) != <span class="keyword">null</span> &amp;&amp; request.getParameter (<span class="string">&quot;username&quot;</span>).equals (<span class="string">&quot;saxon&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (request.getParameter (<span class="string">&quot;score&quot;</span>) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            String score = request.getParameter (<span class="string">&quot;score&quot;</span>);</span><br><span class="line">            <span class="keyword">int</span> i = Integer.parseInt (score);</span><br><span class="line">            out.print (<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            out.print (<span class="string">&quot;你的成绩是：&quot;</span>);</span><br><span class="line">            <span class="keyword">switch</span> (i / <span class="number">10</span>) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">                    out.println (<span class="string">&quot;good&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">                    out.println (<span class="string">&quot;better&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">                    out.println (<span class="string">&quot;Just-so-so&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">                    out.println (<span class="string">&quot;Usual&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    out.println (<span class="string">&quot;worse or in put again&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<p>测试二：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    ArrayList&lt;String&gt; str = <span class="keyword">new</span> ArrayList&lt;&gt; ();</span><br><span class="line">    str.add (<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">    str.add (<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">    str.add (<span class="string">&quot;王五&quot;</span>);</span><br><span class="line">    str.add (<span class="string">&quot;田六&quot;</span>);</span><br><span class="line">    str.add (<span class="string">&quot;李七&quot;</span>);</span><br><span class="line">    request.setAttribute (<span class="string">&quot;people&quot;</span>,str);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<p>JSTL标签：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line"><span class="keyword">var</span>:名字；</span><br><span class="line">items：来源</span><br><span class="line">begin：开始节点</span><br><span class="line">step:下标递增的次序</span><br><span class="line">end:最后一个的下标</span><br><span class="line">--&gt;</span><br><span class="line">&lt;c:forEach <span class="keyword">var</span>=<span class="string">&quot;list&quot;</span> items=<span class="string">&quot;$&#123;people&#125;&quot;</span> begin=<span class="string">&quot;0&quot;</span> step=<span class="string">&quot;2&quot;</span> end=<span class="string">&quot;5&quot;</span>&gt;</span><br><span class="line">    &lt;c:out value=<span class="string">&quot;$&#123;list&#125;&quot;</span>/&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>

<p>Java代码：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;<span class="number">5</span> ; i+=<span class="number">2</span>) &#123;</span><br><span class="line">        out.println (str.get (i));</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<p>通过对比我们就可以明白，标签可以做的，我们的Java语言也可以做。那么用标签的原因就是简化代码，看起来美观一些；</p>
<h4 id="二、EL表达式"><a href="#二、EL表达式" class="headerlink" title="二、EL表达式"></a>二、EL表达式</h4><p><strong>格式:  ${}</strong></p>
<p>作用：</p>
<ul>
<li>获取数据</li>
<li>执行运算</li>
<li>获得web执行的对象；</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$&#123;param.score&#125; <span class="comment">//获得数据</span></span><br><span class="line">$&#123;score&gt;<span class="number">90</span>&#125;    <span class="comment">//执行运算</span></span><br><span class="line">$&#123;param.score&#125;<span class="comment">//获得web对象</span></span><br></pre></td></tr></table></figure>

<h2 id="十一、JavaBean"><a href="#十一、JavaBean" class="headerlink" title="十一、JavaBean"></a>十一、JavaBean</h2><p>一张表对应一个实体类；一一映射；</p>
<h2 id="十二、MVC三层架构"><a href="#十二、MVC三层架构" class="headerlink" title="十二、MVC三层架构"></a>十二、MVC三层架构</h2><p><strong>servlet和jsp都可以写Java代码;servlet注重写处理代码，跳转页面;JSP注重于显示数据</strong></p>
<p><strong>mvc:</strong></p>
<ul>
<li><strong>M:model (模型 service)**：</strong>控制业务操作，对数据的增删改查；访问数据库**；</li>
<li><strong>V:view(视图 JSP)**MVC好处是它能为应用程序处理很多不同的视图，在视图中其实没有真正的处理发生，不管这些数据是联机存储的还是一个雇员列表，作为视图来讲，它只是作为一种输出数据并允许用户操纵的方式，</strong>提供用户操作，展示数据模型**</li>
<li>**C :controller(控制器 servlet)**：接收数据，将数据交给服务层去做，页面的跳转</li>
</ul>
<p><img src="https://iknow-pic.cdn.bcebos.com/9f2f070828381f3073dfcbbda4014c086f06f0e4?x-bce-process=image/resize,m_lfit,w_600,h_800,limit_1"></p>
<h2 id="十三、过滤器filter"><a href="#十三、过滤器filter" class="headerlink" title="十三、过滤器filter"></a>十三、过滤器filter</h2><p>应用：</p>
<ul>
<li>web服务器有一些垃圾请求那么我们后台就应该报错或者不处理</li>
<li>乱码问题</li>
</ul>
<p>测试代码：</p>
<ol>
<li>过滤器</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">filterDemo</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span> <span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        System.out.println (<span class="string">&quot;过滤器初始化完毕&quot;</span>);<span class="comment">//在一切之前初始化</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span> <span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        servletRequest.setCharacterEncoding (<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        servletResponse.setContentType (<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        servletResponse.setCharacterEncoding (<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        System.out.println (<span class="string">&quot;start***************************&quot;</span>);</span><br><span class="line">        filterChain.doFilter (servletRequest,servletResponse);<span class="comment">//必须写</span></span><br><span class="line">        System.out.println (<span class="string">&quot;end***************************&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println (<span class="string">&quot;销毁&quot;</span>);<span class="comment">//在服务器关闭时注销</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        resp.getWriter ().write (<span class="string">&quot;只有爱，才会喜欢代码&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3.配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>s<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.saxon.filter.Demo<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>s<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/r/r<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>s<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/r<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>f<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.saxon.filter.filterDemo<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>f<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/r/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>//文件目录</span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="十四、SMBMS系统"><a href="#十四、SMBMS系统" class="headerlink" title="十四、SMBMS系统"></a>十四、SMBMS系统</h2><h3 id="一、步骤"><a href="#一、步骤" class="headerlink" title="一、步骤"></a>一、步骤</h3><p><strong>1.搭建一个web项目</strong></p>
<p> <strong>2.配置Tomcat</strong></p>
<p> <strong>3.导入依赖和更新web.xml</strong></p>
<p> <strong>4.编写实体类JavaBean；</strong></p>
<p> <strong>5.创建项目的目录</strong></p>
<h5 id="编写基础公共类，工具类；"><a href="#编写基础公共类，工具类；" class="headerlink" title="编写基础公共类，工具类；"></a><strong>编写基础公共类，工具类；</strong></h5><ol>
<li><h6 id="数据库配置文件db-properties"><a href="#数据库配置文件db-properties" class="headerlink" title="数据库配置文件db.properties,"></a>数据库配置文件db.properties,</h6><p>关于读取配置文件的问题；其中一种方法，使用类加载器。getClassLoader ().getResource会选择当前class文件的根目录(src/)，在web程序中，我们的Java文件夹中Java文件编译过后会在classes文件夹下，我们的resource下面的文件也会到这个包里，所以可以这么使用；关于类加载器的内容，慢慢的开始补充；</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">InputStream stream = BaseDao.class.getClassLoader ().getResourceAsStream (<span class="string">&quot;db.properties&quot;</span>);</span><br></pre></td></tr></table></figure>

<h6 id="2-编写数据库的查询类"><a href="#2-编写数据库的查询类" class="headerlink" title="2.编写数据库的查询类"></a>2.编写数据库的查询类</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.Dao;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseDao</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driver;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String url;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String username;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            InputStream stream = BaseDao.class.getClassLoader ().getResourceAsStream (<span class="string">&quot;db.properties&quot;</span>);</span><br><span class="line">            Properties properties = <span class="keyword">new</span> Properties ();</span><br><span class="line">            properties.load (stream);</span><br><span class="line">            driver = properties.getProperty (<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">            url = properties.getProperty (<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            username = properties.getProperty (<span class="string">&quot;username&quot;</span>);</span><br><span class="line">            password = properties.getProperty (<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace ();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName (driver);</span><br><span class="line">            connection = DriverManager.getConnection (url, username, password);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace ();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> connection;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> connection 数据库连接;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sql        查询语句;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> params     参数;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回查询;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ResultSet <span class="title">executeQuery</span> <span class="params">(Connection connection, String sql, Object[] params)</span> </span>&#123;</span><br><span class="line">        ResultSet resultSet = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                PreparedStatement preparedStatement = connection.prepareStatement (sql);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; params.length; i++) &#123;</span><br><span class="line">                    preparedStatement.setObject (i, params[i - <span class="number">1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">                resultSet = preparedStatement.executeQuery (sql);</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace ();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resultSet;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> connection 数据库连接</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sql        数据库查询语句</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> params     数据库的属性</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回改变的行数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">execute</span> <span class="params">(Connection connection, String sql, Object[] params)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> changeRows = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                PreparedStatement preparedStatement = connection.prepareStatement (sql);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; params.length; i++) &#123;</span><br><span class="line">                    preparedStatement.setObject (i + <span class="number">1</span>, params[i]);</span><br><span class="line">                &#125;</span><br><span class="line">                changeRows = preparedStatement.executeUpdate ();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace ();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> changeRows;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 关闭连接释放资源</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> connection 连接</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> statement  数据库本身</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resultSet  结果集合</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回释放结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">release</span> <span class="params">(Connection connection, Statement statement, ResultSet resultSet)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.close ();</span><br><span class="line">                connection = <span class="keyword">null</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace ();</span><br><span class="line">                System.out.println (<span class="string">&quot;connection&quot;</span> + <span class="string">&quot;关闭失败&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (statement != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                statement.close ();</span><br><span class="line">                statement = <span class="keyword">null</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace ();</span><br><span class="line">                System.out.println (<span class="string">&quot;statement&quot;</span> + <span class="string">&quot;关闭失败&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (resultSet != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                resultSet.close ();</span><br><span class="line">                resultSet = <span class="keyword">null</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace ();</span><br><span class="line">                System.out.println (<span class="string">&quot;resultSet&quot;</span> + <span class="string">&quot;关闭失败&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="3-编写字符编码过滤器"><a href="#3-编写字符编码过滤器" class="headerlink" title="3.编写字符编码过滤器"></a>3.编写字符编码过滤器</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CharacterEncodingFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span> <span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span> <span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        request.setCharacterEncoding (<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        response.setCharacterEncoding (<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        chain.doFilter (request, response);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span> <span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="7-导入静态资源"><a href="#7-导入静态资源" class="headerlink" title="7.导入静态资源"></a>7.导入静态资源</h5><h5 id="8-编写Dao层代码"><a href="#8-编写Dao层代码" class="headerlink" title="8.编写Dao层代码"></a>8.编写Dao层代码</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.Dao.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.saxon.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">     <span class="function">User <span class="title">getLoginUser</span><span class="params">(Connection connection, String userCode,String password)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.Dao.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.saxon.Dao.BaseDao;</span><br><span class="line"><span class="keyword">import</span> com.saxon.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserDaoImpl</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">        user=<span class="keyword">new</span> User ();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getLoginUser</span> <span class="params">(Connection connection, String userCode,String password)</span> </span>&#123;</span><br><span class="line">        connection = BaseDao.getConnection ();</span><br><span class="line">        String sql = <span class="string">&quot;select * from smbms_user where smbms_user.userCode=? and smbms_user.userPassword=?; &quot;</span>;</span><br><span class="line">        Object[] params = &#123;userCode,password&#125;;</span><br><span class="line">        <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">            ResultSet resultSet = BaseDao.executeQuery (connection, sql, params);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(resultSet.next ())&#123;</span><br><span class="line">                    user.setID (resultSet.getInt (<span class="string">&quot;id&quot;</span>));</span><br><span class="line">                    user.setUserCode (resultSet.getString (<span class="string">&quot;userCode&quot;</span>));</span><br><span class="line">                    user.setUserName (resultSet.getString (<span class="string">&quot;userName&quot;</span>));</span><br><span class="line">                    user.setUserPassword (resultSet.getString (<span class="string">&quot;userPassword&quot;</span>));</span><br><span class="line">                    user.setGender (resultSet.getInt (<span class="string">&quot;gender&quot;</span>));</span><br><span class="line">                    user.setBirthday (resultSet.getDate (<span class="string">&quot;birthday&quot;</span>));</span><br><span class="line">                    user.setPhone (resultSet.getString (<span class="string">&quot;phone&quot;</span>));</span><br><span class="line">                    user.setAddress (resultSet.getString (<span class="string">&quot;address&quot;</span>));</span><br><span class="line">                    user.setUserRole (resultSet.getInt (<span class="string">&quot;userRole&quot;</span>));</span><br><span class="line">                    user.setCreateBy (resultSet.getInt (<span class="string">&quot;createdBy&quot;</span>));</span><br><span class="line">                    user.setCreationDate (resultSet.getDate (<span class="string">&quot;creationDate&quot;</span>));</span><br><span class="line">                    user.setModifyBy (resultSet.getInt (<span class="string">&quot;modifyBy&quot;</span>));</span><br><span class="line">                    user.setModifyDate (resultSet.getDate (<span class="string">&quot;modifyDate&quot;</span>));</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    user=<span class="keyword">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace ();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="9-编写service层代码"><a href="#9-编写service层代码" class="headerlink" title="9.编写service层代码"></a>9.编写service层代码</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.saxon.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">     <span class="function">User  <span class="title">login</span><span class="params">(String userCode,String password)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.saxon.Dao.BaseDao;</span><br><span class="line"><span class="keyword">import</span> com.saxon.Dao.User.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.saxon.Dao.User.UserDaoImpl;</span><br><span class="line"><span class="keyword">import</span> com.saxon.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserServiceImpl</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">      userDao = <span class="keyword">new</span> UserDaoImpl ();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">login</span> <span class="params">(String userCode,String password)</span> </span>&#123;</span><br><span class="line">        Connection connection=<span class="keyword">null</span>;</span><br><span class="line">        User user=<span class="keyword">null</span>;</span><br><span class="line">        connection=BaseDao.getConnection ();</span><br><span class="line">        <span class="keyword">if</span> (userDao!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            user = userDao.getLoginUser (connection, userCode,password);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="10-编写注册登录servlet"><a href="#10-编写注册登录servlet" class="headerlink" title="10.编写注册登录servlet"></a>10.编写注册登录servlet</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.servlet.login;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.saxon.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.saxon.service.UserServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.saxon.util.constants;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println (<span class="string">&quot;start&quot;</span>);</span><br><span class="line">        UserServiceImpl user=<span class="keyword">new</span> UserServiceImpl ();</span><br><span class="line">        String userCode = req.getParameter (<span class="string">&quot;userCode&quot;</span>);</span><br><span class="line">        String password = req.getParameter (<span class="string">&quot;userPassword&quot;</span>);</span><br><span class="line">        User login = user.login (userCode, password);</span><br><span class="line">        <span class="keyword">if</span> (login!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            req.getSession ().setAttribute (constants.USER_SESSION,user);</span><br><span class="line">            resp.sendRedirect (<span class="string">&quot;JSP/frame.jsp&quot;</span>);</span><br><span class="line">            resp.setCharacterEncoding (<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.getServletContext ().setAttribute (<span class="string">&quot;error&quot;</span>,<span class="string">&quot;密码错误&quot;</span>);</span><br><span class="line">            resp.sendRedirect (<span class="string">&quot;login.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="二、密码修改"><a href="#二、密码修改" class="headerlink" title="二、密码修改"></a>二、密码修改</h3><h4 id="1-旧密码验证"><a href="#1-旧密码验证" class="headerlink" title="1.旧密码验证"></a>1.旧密码验证</h4><p>由于旧密码可以被我们储存在session中，所以我们可以不用在验证旧密码的时候去查询数据库；</p>
<p>前端代码：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line">jsp/user.<span class="keyword">do</span><span class="string">&quot; 数据提交给的serlvet action里面的数据</span></span><br><span class="line"><span class="string">这里的name属性就是我们接收值的string 例如req.getParameter (&quot;</span>oldpassword<span class="string">&quot;) 表单传递的是name</span></span><br><span class="line"><span class="string">$&#123;&#125;:el表达式，</span></span><br><span class="line"><span class="string">--&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;%@ page language=&quot;</span>java<span class="string">&quot; contentType=&quot;</span>text/html; charset=UTF-<span class="number">8</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">	pageEncoding=&quot;</span>UTF-<span class="number">8</span><span class="string">&quot;%&gt;</span></span><br><span class="line"><span class="string">&lt;%@include file=&quot;</span>/JSP/common/head.jsp<span class="string">&quot;%&gt;</span></span><br><span class="line"><span class="string">&lt;div class=&quot;</span>right<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;</span>location<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;strong&gt;你现在所在的位置是:&lt;/strong&gt;</span></span><br><span class="line"><span class="string">                &lt;span&gt;密码修改页面&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;</span>providerAdd<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;form id=&quot;</span>userForm<span class="string">&quot; name=&quot;</span>userForm<span class="string">&quot; method=&quot;</span>post<span class="string">&quot; action=&quot;</span>$&#123;pageContext.request.contextPath &#125;/jsp/user.<span class="keyword">do</span><span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;</span>hidden<span class="string">&quot; name=&quot;</span>method<span class="string">&quot; value=&quot;</span>savepwd<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;!--div的class 为error是验证错误，ok是验证成功--&gt;</span></span><br><span class="line"><span class="string">                    &lt;div class=&quot;</span>info<span class="string">&quot;&gt;$&#123;message&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">                    &lt;div class=&quot;</span><span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;label for=&quot;</span>oldPassword<span class="string">&quot;&gt;旧密码：&lt;/label&gt;</span></span><br><span class="line"><span class="string">                        &lt;input type=&quot;</span>password<span class="string">&quot; name=&quot;</span>oldpassword<span class="string">&quot; id=&quot;</span>oldpassword<span class="string">&quot; value=&quot;</span><span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">						&lt;font color=&quot;</span>red<span class="string">&quot;&gt;&lt;/font&gt;</span></span><br><span class="line"><span class="string">                    &lt;/div&gt;</span></span><br><span class="line"><span class="string">                    &lt;div&gt;</span></span><br><span class="line"><span class="string">                        &lt;label for=&quot;</span>newPassword<span class="string">&quot;&gt;新密码：&lt;/label&gt;</span></span><br><span class="line"><span class="string">                        &lt;input type=&quot;</span>password<span class="string">&quot; name=&quot;</span>newpassword<span class="string">&quot; id=&quot;</span>newpassword<span class="string">&quot; value=&quot;</span><span class="string">&quot;&gt; </span></span><br><span class="line"><span class="string">						&lt;font color=&quot;</span>red<span class="string">&quot;&gt;&lt;/font&gt;</span></span><br><span class="line"><span class="string">                    &lt;/div&gt;</span></span><br><span class="line"><span class="string">                    &lt;div&gt;</span></span><br><span class="line"><span class="string">                        &lt;label for=&quot;</span>rnewpassword<span class="string">&quot;&gt;确认新密码：&lt;/label&gt;</span></span><br><span class="line"><span class="string">                        &lt;input type=&quot;</span>password<span class="string">&quot; name=&quot;</span>rnewpassword<span class="string">&quot; id=&quot;</span>rnewpassword<span class="string">&quot; value=&quot;</span><span class="string">&quot;&gt; </span></span><br><span class="line"><span class="string">						&lt;font color=&quot;</span>red<span class="string">&quot;&gt;&lt;/font&gt;</span></span><br><span class="line"><span class="string">                    &lt;/div&gt;</span></span><br><span class="line"><span class="string">                    &lt;div class=&quot;</span>providerAddBtn<span class="string">&quot;&gt;</span></span><br><span class="line">                        &lt;!--&lt;a href=&quot;#&quot;&gt;保存&lt;/a&gt;--&gt;</span><br><span class="line">                        &lt;input type=<span class="string">&quot;button&quot;</span> name=<span class="string">&quot;save&quot;</span> id=<span class="string">&quot;save&quot;</span> value=<span class="string">&quot;保存&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;input-button&quot;</span>&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/section&gt;</span><br><span class="line">&lt;%<span class="meta">@include</span> file=<span class="string">&quot;/JSP/common/foot.jsp&quot;</span> %&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;pageContext.request.contextPath &#125;/js/pwdmodify.js&quot; charset=&quot;UTF-8&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>对旧数据的查询：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//验证旧密码，从session中获得</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">oldPwd</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;&gt; ();<span class="comment">//设置一个map集合来把信息传递出去</span></span><br><span class="line">        String oldpassword = req.getParameter (<span class="string">&quot;oldpassword&quot;</span>);<span class="comment">//获得传递过来的信息</span></span><br><span class="line">        User user = (User) req.getSession ().getAttribute (constants.USER_SESSION);</span><br><span class="line">        <span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (oldpassword != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (oldpassword.equals (user.getUserPassword ())) &#123;</span><br><span class="line">                    map.put (<span class="string">&quot;result&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    map.put (<span class="string">&quot;result&quot;</span>, <span class="string">&quot;false&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                map.put (<span class="string">&quot;result&quot;</span>, <span class="string">&quot;error&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            map.put (<span class="string">&quot;result&quot;</span>, <span class="string">&quot;sessionerror&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//设置编译的类型</span></span><br><span class="line">        resp.setContentType (<span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">        PrintWriter writer = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            writer = resp.getWriter ();</span><br><span class="line">            writer.write (JSONArray.toJSONString (map));<span class="comment">//将一个对象变为json</span></span><br><span class="line">            writer.flush ();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace ();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (writer != <span class="keyword">null</span>) &#123;</span><br><span class="line">                writer.close ();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>把servlet处理的结果放回到一个集合中，再把集合变成一个json对象，这样js可以接收数据；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (oldpassword.equals (user.getUserPassword ())) &#123;</span><br><span class="line">                    map.put (<span class="string">&quot;result&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    map.put (<span class="string">&quot;result&quot;</span>, <span class="string">&quot;false&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                map.put (<span class="string">&quot;result&quot;</span>, <span class="string">&quot;error&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            map.put (<span class="string">&quot;result&quot;</span>, <span class="string">&quot;sessionerror&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">writer.write (JSONArray.toJSONString (map));<span class="comment">//将一个对象变为json</span></span><br></pre></td></tr></table></figure>

<p>AJAX：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">oldpassword.on(<span class="string">&quot;blur&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            type: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">            url: path + <span class="string">&quot;/jsp/user.do&quot;</span>,<span class="comment">//传向的位置</span></span><br><span class="line">            data: &#123;<span class="attr">method</span>: <span class="string">&quot;pwdmodify&quot;</span>, <span class="attr">oldpassword</span>: oldpassword.val()&#125;,<span class="comment">//传输的数据</span></span><br><span class="line">            dataType: <span class="string">&quot;json&quot;</span>,<span class="comment">//接收的数据类型</span></span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;<span class="comment">//成功的页面，回调函数</span></span><br><span class="line">                <span class="keyword">if</span> (data.result == <span class="string">&quot;true&quot;</span>) &#123;<span class="comment">//旧密码正确</span></span><br><span class="line">                    validateTip(oldpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;green&quot;</span>&#125;, imgYes, <span class="literal">true</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.result == <span class="string">&quot;false&quot;</span>) &#123;<span class="comment">//旧密码输入不正确</span></span><br><span class="line">                    validateTip(oldpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;red&quot;</span>&#125;, imgNo + <span class="string">&quot; 原密码输入不正确&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.result == <span class="string">&quot;sessionerror&quot;</span>) &#123;<span class="comment">//当前用户session过期，请重新登录</span></span><br><span class="line">                    validateTip(oldpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;red&quot;</span>&#125;, imgNo + <span class="string">&quot; 当前用户session过期，请重新登录&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.result == <span class="string">&quot;error&quot;</span>) &#123;<span class="comment">//旧密码输入为空</span></span><br><span class="line">                    validateTip(oldpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;red&quot;</span>&#125;, imgNo + <span class="string">&quot; 请输入旧密码&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            error: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">                <span class="comment">//请求出错 回调函数</span></span><br><span class="line"></span><br><span class="line">                validateTip(oldpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;red&quot;</span>&#125;, imgNo + <span class="string">&quot; 请求错误&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在ajax的成功返回的值中，data,由于接受的数据是json，我们后台返回的是一个map集合编译成的一个json数据，而json的格式就是key-value,所以其实date是一个对象，我们传的数值就是一个属性，所以用data.result;</span></span><br><span class="line">data.result == <span class="string">&quot;true“</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">            type: <span class="string">&quot;GET&quot;</span>,<span class="comment">//接受方式</span></span><br><span class="line">            url: path + <span class="string">&quot;/jsp/user.do&quot;</span>,<span class="comment">//传向的位置</span></span><br><span class="line">            data: &#123;<span class="attr">method</span>: <span class="string">&quot;pwdmodify&quot;</span>, <span class="attr">oldpassword</span>: oldpassword.val()&#125;,<span class="comment">//传输的数据</span></span><br><span class="line">            dataType: <span class="string">&quot;json&quot;</span>,<span class="comment">//接收的数据类型</span></span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;<span class="comment">//成功的页面，回调函数,</span></span><br><span class="line">            error:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span></span><br></pre></td></tr></table></figure>

<h4 id="2-密码更新"><a href="#2-密码更新" class="headerlink" title="2.密码更新"></a>2.密码更新</h4><h5 id="1-userDao"><a href="#1-userDao" class="headerlink" title="1.userDao"></a>1.userDao</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">changeUserPassword</span> <span class="params">(Connection connection, String userCode, String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> execute = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String sql = <span class="string">&quot;update smbms_user set userPassword =? where userCode=?;&quot;</span>;</span><br><span class="line">            Object[] params = &#123;password, userCode&#125;;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">                execute = BaseDao.execute (connection, sql, params);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace ();</span><br><span class="line">            System.out.println (<span class="string">&quot;UserDaoImpl 关闭失败&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">                BaseDao.release (<span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);<span class="comment">//感觉应该没啥用</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> execute;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.userService</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">PasswordService</span> <span class="params">(String userCode, String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = BaseDao.getConnection ();</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> i = userDao.changeUserPassword (connection, userCode, password);</span><br><span class="line">                flag = i &gt; <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception throwables) &#123;</span><br><span class="line">            throwables.printStackTrace ();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">                BaseDao.release (connection, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>3.servlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//更新密码</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updatePassword</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String newpwd = req.getParameter (<span class="string">&quot;newpassword&quot;</span>);</span><br><span class="line">        Object attribute = req.getSession ().getAttribute (constants.USER_SESSION);</span><br><span class="line">        <span class="keyword">if</span> (attribute != <span class="keyword">null</span>) &#123;</span><br><span class="line">            User user = (User) attribute;</span><br><span class="line">            UserServiceImpl service = <span class="keyword">new</span> UserServiceImpl ();</span><br><span class="line">            <span class="keyword">boolean</span> b = service.PasswordService (user.getUserCode (), newpwd);</span><br><span class="line">            <span class="keyword">if</span> (b) &#123;</span><br><span class="line">                req.setAttribute (<span class="string">&quot;message&quot;</span>, <span class="string">&quot;change password successful&quot;</span>);</span><br><span class="line">                req.getSession ().removeAttribute (constants.USER_SESSION);</span><br><span class="line">                req.getRequestDispatcher (<span class="string">&quot;/login.jsp&quot;</span>).forward (req, resp);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                req.setAttribute (<span class="string">&quot;message&quot;</span>, <span class="string">&quot;change password error&quot;</span>);</span><br><span class="line">                req.getRequestDispatcher (<span class="string">&quot;#&quot;</span>).forward (req, resp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            req.setAttribute (<span class="string">&quot;message&quot;</span>, <span class="string">&quot;error&quot;</span>);</span><br><span class="line">            req.getRequestDispatcher (<span class="string">&quot;#&quot;</span>).forward (req, resp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;info&quot;&gt;$&#123;message&#125;&lt;/div&gt;//接收返回值</span><br></pre></td></tr></table></figure>

<p>最后的提交与否是要三个都是真的时候才会提交</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">saveBtn.on(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        oldpassword.blur();</span><br><span class="line">        newpassword.blur();</span><br><span class="line">        rnewpassword.blur();</span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">            oldpassword.attr(<span class="string">&quot;validateStatus&quot;</span>) == <span class="string">&quot;true&quot;</span>&amp;&amp;</span><br><span class="line">            newpassword.attr(<span class="string">&quot;validateStatus&quot;</span>) == <span class="string">&quot;true&quot;</span></span><br><span class="line">            &amp;&amp; rnewpassword.attr(<span class="string">&quot;validateStatus&quot;</span>) == <span class="string">&quot;true&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (confirm(<span class="string">&quot;确定要修改密码？&quot;</span>)) &#123;</span><br><span class="line">                $(<span class="string">&quot;#userForm&quot;</span>).submit();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<p>密码验证的js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oldpassword = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> newpassword = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> rnewpassword = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> saveBtn = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    oldpassword = $(<span class="string">&quot;#oldpassword&quot;</span>);</span><br><span class="line">    newpassword = $(<span class="string">&quot;#newpassword&quot;</span>);</span><br><span class="line">    rnewpassword = $(<span class="string">&quot;#rnewpassword&quot;</span>);</span><br><span class="line">    saveBtn = $(<span class="string">&quot;#save&quot;</span>);</span><br><span class="line"></span><br><span class="line">    oldpassword.next().html(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">    newpassword.next().html(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">    rnewpassword.next().html(<span class="string">&quot;*&quot;</span>);</span><br><span class="line"></span><br><span class="line">    oldpassword.on(<span class="string">&quot;blur&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            type: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">            url: path + <span class="string">&quot;/jsp/user.do&quot;</span>,<span class="comment">//传向的位置</span></span><br><span class="line">            data: &#123;<span class="attr">method</span>: <span class="string">&quot;pwdmodify&quot;</span>, <span class="attr">oldpassword</span>: oldpassword.val()&#125;,<span class="comment">//传输的数据</span></span><br><span class="line">            dataType: <span class="string">&quot;json&quot;</span>,<span class="comment">//接收的数据类型</span></span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;<span class="comment">//成功的页面，回调函数</span></span><br><span class="line">                <span class="keyword">if</span> (data.result == <span class="string">&quot;true&quot;</span>) &#123;<span class="comment">//旧密码正确</span></span><br><span class="line">                    validateTip(oldpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;green&quot;</span>&#125;, imgYes, <span class="literal">true</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.result == <span class="string">&quot;false&quot;</span>) &#123;<span class="comment">//旧密码输入不正确</span></span><br><span class="line">                    validateTip(oldpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;red&quot;</span>&#125;, imgNo + <span class="string">&quot; 原密码输入不正确&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.result == <span class="string">&quot;sessionerror&quot;</span>) &#123;<span class="comment">//当前用户session过期，请重新登录</span></span><br><span class="line">                    validateTip(oldpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;red&quot;</span>&#125;, imgNo + <span class="string">&quot; 当前用户session过期，请重新登录&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.result == <span class="string">&quot;error&quot;</span>) &#123;<span class="comment">//旧密码输入为空</span></span><br><span class="line">                    validateTip(oldpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;red&quot;</span>&#125;, imgNo + <span class="string">&quot; 请输入旧密码&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            error: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">                <span class="comment">//请求出错 回调函数</span></span><br><span class="line"></span><br><span class="line">                validateTip(oldpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;red&quot;</span>&#125;, imgNo + <span class="string">&quot; 请求错误&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;).on(<span class="string">&quot;focus&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        validateTip(oldpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;#666666&quot;</span>&#125;, <span class="string">&quot;* Please enter the original password&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    newpassword.on(<span class="string">&quot;focus&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        validateTip(newpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;#666666&quot;</span>&#125;, <span class="string">&quot;* Password length must be greater than 6 and less than 20&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;).on(<span class="string">&quot;blur&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (newpassword.val() != <span class="literal">null</span> &amp;&amp; newpassword.val().length &gt; <span class="number">6</span></span><br><span class="line">            &amp;&amp; newpassword.val().length &lt; <span class="number">20</span>) &#123;</span><br><span class="line">            validateTip(newpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;green&quot;</span>&#125;, imgYes, <span class="literal">true</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            validateTip(newpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;red&quot;</span>&#125;, imgNo + <span class="string">&quot; Password input does not meet the specification, please re-enter&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    rnewpassword.on(<span class="string">&quot;focus&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        validateTip(rnewpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;#666666&quot;</span>&#125;, <span class="string">&quot;* Please enter the same password as above&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;).on(<span class="string">&quot;blur&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (rnewpassword.val() != <span class="literal">null</span> &amp;&amp; rnewpassword.val().length &gt; <span class="number">6</span></span><br><span class="line">            &amp;&amp; rnewpassword.val().length &lt; <span class="number">20</span> &amp;&amp; newpassword.val() == rnewpassword.val()) &#123;</span><br><span class="line">            validateTip(rnewpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;green&quot;</span>&#125;, imgYes, <span class="literal">true</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            validateTip(rnewpassword.next(), &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;red&quot;</span>&#125;, imgNo + <span class="string">&quot; The two passwords are inconsistent, please re-enter&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    saveBtn.on(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        oldpassword.blur();</span><br><span class="line">        newpassword.blur();</span><br><span class="line">        rnewpassword.blur();</span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">            oldpassword.attr(<span class="string">&quot;validateStatus&quot;</span>) == <span class="string">&quot;true&quot;</span>&amp;&amp;</span><br><span class="line">            newpassword.attr(<span class="string">&quot;validateStatus&quot;</span>) == <span class="string">&quot;true&quot;</span></span><br><span class="line">            &amp;&amp; rnewpassword.attr(<span class="string">&quot;validateStatus&quot;</span>) == <span class="string">&quot;true&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (confirm(<span class="string">&quot;确定要修改密码？&quot;</span>)) &#123;</span><br><span class="line">                $(<span class="string">&quot;#userForm&quot;</span>).submit();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="三、用户管理"><a href="#三、用户管理" class="headerlink" title="三、用户管理"></a>三、用户管理</h3><p>用户管理是由三条线组成：查询用户，查询角色，查询用户数量（分页）</p>
<h5 id="查询用户："><a href="#查询用户：" class="headerlink" title="查询用户："></a>查询用户：</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUserList</span> <span class="params">(Connection connection, String userName, <span class="keyword">int</span> roleID, <span class="keyword">int</span> currentPage, <span class="keyword">int</span> pageSize)</span> </span>&#123;</span><br><span class="line">        StringBuffer sql = <span class="keyword">new</span> StringBuffer (<span class="string">&quot;select * from smbms_user u ,smbms_role r  where u.userRole=r.id &quot;</span>);</span><br><span class="line">        ResultSet resultSet = <span class="keyword">null</span>;</span><br><span class="line">        ArrayList&lt;Object&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt; ();</span><br><span class="line">        List&lt;User&gt; userList = <span class="keyword">new</span> ArrayList&lt;&gt; ();</span><br><span class="line">        <span class="keyword">int</span> execute = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (userName != <span class="keyword">null</span>) &#123;</span><br><span class="line">                sql.append (<span class="string">&quot;and u.userName like ? &quot;</span>);</span><br><span class="line">                list.add (<span class="string">&quot;%&quot;</span> + userName + <span class="string">&quot;%&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (roleID &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                sql.append (<span class="string">&quot;and r.id= ?&quot;</span>);</span><br><span class="line">                list.add (roleID);</span><br><span class="line">            &#125;</span><br><span class="line">            sql.append (<span class="string">&quot; order by u.id  limit ?,?;&quot;</span>);<span class="comment">//第一个参数指定第一个返回记录行的偏移量,就是从第几个开始，第二个参数指定返回记录行的最大数目</span></span><br><span class="line">            currentPage = (currentPage - <span class="number">1</span>) *pageSize;</span><br><span class="line">            list.add (currentPage);</span><br><span class="line">            list.add (pageSize);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                resultSet = BaseDao.executeQuery (connection, sql.toString (), list.toArray ());</span><br><span class="line">                <span class="keyword">while</span> (resultSet.next ()) &#123;</span><br><span class="line">                    User _user = <span class="keyword">new</span> User ();</span><br><span class="line">                    _user.setID (resultSet.getInt (<span class="string">&quot;id&quot;</span>));</span><br><span class="line">                    _user.setUserCode (resultSet.getString (<span class="string">&quot;userCode&quot;</span>));</span><br><span class="line">                    _user.setUserName (resultSet.getString (<span class="string">&quot;userName&quot;</span>));</span><br><span class="line">                    _user.setUserPassword (resultSet.getString (<span class="string">&quot;userPassword&quot;</span>));</span><br><span class="line">                    _user.setGender (resultSet.getInt (<span class="string">&quot;gender&quot;</span>));</span><br><span class="line">                    _user.setBirthday (resultSet.getDate (<span class="string">&quot;birthday&quot;</span>));</span><br><span class="line">                    _user.setPhone (resultSet.getString (<span class="string">&quot;phone&quot;</span>));</span><br><span class="line">                    _user.setAddress (resultSet.getString (<span class="string">&quot;address&quot;</span>));</span><br><span class="line">                    _user.setUserRole (resultSet.getInt (<span class="string">&quot;userRole&quot;</span>));</span><br><span class="line">                    _user.setCreateBy (resultSet.getInt (<span class="string">&quot;createdBy&quot;</span>));</span><br><span class="line">                    _user.setCreationDate (resultSet.getDate (<span class="string">&quot;creationDate&quot;</span>));</span><br><span class="line">                    _user.setModifyBy (resultSet.getInt (<span class="string">&quot;modifyBy&quot;</span>));</span><br><span class="line">                    _user.setModifyDate (resultSet.getDate (<span class="string">&quot;modifyDate&quot;</span>));</span><br><span class="line">                    userList.add (_user);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception throwables) &#123;</span><br><span class="line">                throwables.printStackTrace ();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                BaseDao.release (<span class="keyword">null</span>, <span class="keyword">null</span>, resultSet);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>这里的重点是利用字符串的拼接和集合的使用，来把查询语句拼成一句查询语句。用于实现我们的用户管理界面的用户查询和角色查询</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (userName != <span class="keyword">null</span>) &#123;</span><br><span class="line">               sql.append (<span class="string">&quot;and u.userName like ? &quot;</span>);</span><br><span class="line">               list.add (<span class="string">&quot;%&quot;</span> + userName + <span class="string">&quot;%&quot;</span>);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">if</span> (roleID &gt; <span class="number">0</span>) &#123;</span><br><span class="line">               sql.append (<span class="string">&quot;and r.id= ?&quot;</span>);</span><br><span class="line">               list.add (roleID);</span><br><span class="line">           &#125;</span><br></pre></td></tr></table></figure>

<p>userservice</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUserList</span> <span class="params">(String userName, <span class="keyword">int</span> userRole, <span class="keyword">int</span> currentPage, <span class="keyword">int</span> pageSize)</span> </span>&#123;</span><br><span class="line">        List&lt;User&gt; userList = <span class="keyword">new</span> ArrayList&lt;&gt; ();</span><br><span class="line">        Connection connection = BaseDao.getConnection ();</span><br><span class="line">        <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">            userList = userDao.getUserList (connection, userName, userRole, currentPage, pageSize);</span><br><span class="line"></span><br><span class="line">            BaseDao.release (connection, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h5 id="查询数量："><a href="#查询数量：" class="headerlink" title="查询数量："></a>查询数量：</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">UserNum</span> <span class="params">(Connection connection, String userName, <span class="keyword">int</span> roleID)</span> </span>&#123;</span><br><span class="line">        StringBuffer sql = <span class="keyword">new</span> StringBuffer (<span class="string">&quot;select count(1) as count from smbms_user u ,smbms_role r  where u.userRole=r.id &quot;</span>);</span><br><span class="line">        ResultSet resultSet = <span class="keyword">null</span>;</span><br><span class="line">        ArrayList&lt;Object&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt; ();</span><br><span class="line">        <span class="keyword">int</span> execute = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (userName != <span class="keyword">null</span>) &#123;</span><br><span class="line">                sql.append (<span class="string">&quot;and u.userCode like ? &quot;</span>);</span><br><span class="line">                list.add (<span class="string">&quot;%&quot;</span> + userName + <span class="string">&quot;%&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (roleID &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                sql.append (<span class="string">&quot;and u.userRole= ?&quot;</span>);</span><br><span class="line">                list.add (roleID);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                resultSet = BaseDao.executeQuery (connection, sql.toString (), list.toArray ());</span><br><span class="line">                <span class="keyword">if</span> (resultSet != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">while</span> (resultSet.next ()) &#123;</span><br><span class="line">                        execute = resultSet.getInt (<span class="string">&quot;count&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception throwables) &#123;</span><br><span class="line">                throwables.printStackTrace ();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                BaseDao.release (<span class="keyword">null</span>, <span class="keyword">null</span>, resultSet);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> execute;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>联表查询；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span> <span class="params">(String userName, <span class="keyword">int</span> userRole)</span> </span>&#123;</span><br><span class="line">    Connection connection = BaseDao.getConnection ();</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">        i = userDao.UserNum (connection, userName, userRole);</span><br><span class="line">        BaseDao.release (connection, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="查询用户的角色的信息"><a href="#查询用户的角色的信息" class="headerlink" title="查询用户的角色的信息"></a>查询用户的角色的信息</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> List&lt;Role&gt; <span class="title">getRoleList</span> <span class="params">(Connection connection)</span></span>&#123;</span><br><span class="line">       List&lt;Role&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt; ();</span><br><span class="line">       String sql = <span class="string">&quot;select * from smbms_role r;&quot;</span>;</span><br><span class="line">       <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">           ResultSet resultSet = BaseDao.executeQuery (connection, sql, <span class="keyword">null</span>);</span><br><span class="line">           <span class="keyword">if</span> (resultSet != <span class="keyword">null</span>) &#123;</span><br><span class="line">               <span class="keyword">try</span> &#123;</span><br><span class="line">                   <span class="keyword">while</span> (resultSet.next ()) &#123;</span><br><span class="line">                       Role _role = <span class="keyword">new</span> Role ();</span><br><span class="line">                       _role.setID (resultSet.getInt (<span class="string">&quot;id&quot;</span>));</span><br><span class="line">                       _role.setRoleCode (resultSet.getString (<span class="string">&quot;roleCode&quot;</span>));</span><br><span class="line">                       _role.setRoleName (resultSet.getString (<span class="string">&quot;roleName&quot;</span>));</span><br><span class="line">                       list.add (_role);</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                   throwables.printStackTrace ();</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> list;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>roleService</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> List&lt;Role&gt; <span class="title">getRoleList</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">       List&lt;Role&gt; roleList = <span class="keyword">new</span> ArrayList&lt;&gt; ();</span><br><span class="line">       Connection connection = BaseDao.getConnection ();</span><br><span class="line">       <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">           roleList = role.getRoleList (connection);</span><br><span class="line">       &#125;</span><br><span class="line">       BaseDao.release (connection,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br><span class="line">       <span class="keyword">return</span> roleList;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>这查询的是为了使用用户角色来查询我们的用户</p>
<p>接下来就是把这三条线合在一起组成一条线；</p>
<p>servlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分页查询界面</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">query</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> </span>&#123;</span><br><span class="line">        String queryname = req.getParameter (<span class="string">&quot;queryname&quot;</span>);</span><br><span class="line">        String checkRole = req.getParameter (<span class="string">&quot;queryUserRole&quot;</span>);</span><br><span class="line">        String index = req.getParameter (<span class="string">&quot;pageIndex&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> queryUserRole = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//确定查询的框是不是为空</span></span><br><span class="line">        <span class="keyword">if</span> (queryname == <span class="keyword">null</span>) &#123;</span><br><span class="line">            queryname = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//判断角色框是否是空，在这个框里，传递出来的是value=0;</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * &lt;c:if test=&quot;$&#123;roleList != null &#125;&quot;&gt;</span></span><br><span class="line"><span class="comment">         * 	&lt;option value=&quot;0&quot;&gt;--请选择--&lt;/option&gt;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> (checkRole != <span class="keyword">null</span> &amp;&amp; ! checkRole.equals (<span class="string">&quot;&quot;</span>)) &#123;</span><br><span class="line">            queryUserRole = Integer.parseInt (checkRole);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//分页</span></span><br><span class="line">        <span class="keyword">int</span> currentPage = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> pageSize = <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">int</span> totalCount = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        UserServiceImpl userService = <span class="keyword">new</span> UserServiceImpl ();</span><br><span class="line">        <span class="comment">//获得用户总数</span></span><br><span class="line">        totalCount = userService.getCount (queryname, queryUserRole);</span><br><span class="line">        <span class="keyword">if</span> (index != <span class="keyword">null</span>) &#123;</span><br><span class="line">            currentPage = Integer.parseInt (index);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置页面</span></span><br><span class="line">        PageSupport pageSupport = <span class="keyword">new</span> PageSupport ();</span><br><span class="line">        pageSupport.setPageSize (pageSize);</span><br><span class="line">        pageSupport.setTotalPageCount (totalCount);</span><br><span class="line">        pageSupport.setCurrentPageNo (currentPage);</span><br><span class="line">        pageSupport.setTotalCount (totalCount);</span><br><span class="line">        <span class="keyword">int</span> currentPageNo = pageSupport.getCurrentPageNo ();</span><br><span class="line">        <span class="comment">//控制第一页和最后一页</span></span><br><span class="line">        <span class="keyword">if</span> (currentPageNo &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            currentPageNo = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (currentPageNo &gt; totalCount) &#123;</span><br><span class="line">            currentPageNo = totalCount;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//获得用户列表显示</span></span><br><span class="line">        List&lt;User&gt; userList = userService.getUserList (queryname, queryUserRole, currentPage, pageSize);</span><br><span class="line"></span><br><span class="line">        req.setAttribute (<span class="string">&quot;userList&quot;</span>, userList);</span><br><span class="line">        <span class="comment">//角色列表  用户查询的显示rolelist</span></span><br><span class="line">        roleServiceImpl role = <span class="keyword">new</span> roleServiceImpl ();</span><br><span class="line">        List&lt;Role&gt; roleList = role.getRoleList ();</span><br><span class="line">        req.setAttribute (<span class="string">&quot;roleList&quot;</span>, roleList);</span><br><span class="line">        <span class="comment">//显示页数</span></span><br><span class="line">        req.setAttribute (<span class="string">&quot;totalCount&quot;</span>, totalCount);</span><br><span class="line">        req.setAttribute (<span class="string">&quot;currentPageNo&quot;</span>, currentPageNo);<span class="comment">//当前页数</span></span><br><span class="line">        req.setAttribute (<span class="string">&quot;totalPageCount&quot;</span>,pageSupport.getTotalPageCount ());<span class="comment">//查询的总页数</span></span><br><span class="line">        req.setAttribute (<span class="string">&quot;queryUserName&quot;</span>,queryname);<span class="comment">//名字查询</span></span><br><span class="line">        req.setAttribute (<span class="string">&quot;userList&quot;</span>,userList);<span class="comment">//用户列表</span></span><br><span class="line">        req.setAttribute (<span class="string">&quot;queryUserRole&quot;</span>,roleList);<span class="comment">//用户角色的列表</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            req.getRequestDispatcher (<span class="string">&quot;/JSP/userlist.jsp&quot;</span>).forward (req, resp);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace ();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>jsp:</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.List&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;com.saxon.pojo.Role&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">		 pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;%<span class="meta">@include</span> file=<span class="string">&quot;/JSP/common/head.jsp&quot;</span>%&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;right&quot;</span>&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;location&quot;</span>&gt;</span><br><span class="line">                &lt;strong&gt;你现在所在的位置是:&lt;/strong&gt;</span><br><span class="line">                &lt;span&gt;用户管理页面&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;search&quot;</span>&gt;</span><br><span class="line">           		&lt;form method=<span class="string">&quot;get&quot;</span> action=<span class="string">&quot;$&#123;pageContext.request.contextPath &#125;/jsp/user.do&quot;</span>&gt;</span><br><span class="line">					&lt;input name=<span class="string">&quot;method&quot;</span> value=<span class="string">&quot;query&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;input-text&quot;</span> type=<span class="string">&quot;hidden&quot;</span>&gt;</span><br><span class="line">					 &lt;span&gt;用户名：&lt;/span&gt;</span><br><span class="line">					 &lt;input name=<span class="string">&quot;queryname&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;input-text&quot;</span>	type=<span class="string">&quot;text&quot;</span> value=<span class="string">&quot;$&#123;queryUserName&#125;&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">					&lt;span&gt;用户角色：&lt;/span&gt;</span><br><span class="line">					&lt;select name=<span class="string">&quot;queryUserRole&quot;</span>&gt;</span><br><span class="line">						&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;roleList!= null &#125;&quot;</span>&gt;</span><br><span class="line">							&lt;option value=&quot;0&quot;&gt;--请选择--&lt;/option&gt;</span><br><span class="line">						&lt;/c:if&gt;</span><br><span class="line">					&lt;/select&gt;</span><br><span class="line">					&lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;pageIndex&quot;</span> value=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">					 &lt;input	value=<span class="string">&quot;查 询&quot;</span> type=<span class="string">&quot;submit&quot;</span> id=<span class="string">&quot;searchbutton&quot;</span>&gt;</span><br><span class="line">&lt;%--					 &lt;a href=&quot;$&#123;pageContext.request.contextPath&#125;/jsp/useradd.jsp&quot; &gt;添加用户&lt;/a&gt;--%&gt;</span><br><span class="line">				&lt;/form&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;!--用户--&gt;</span><br><span class="line">            &lt;table <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;providerTable&quot;</span> cellpadding=<span class="string">&quot;0&quot;</span> cellspacing=<span class="string">&quot;0&quot;</span>&gt;</span><br><span class="line">                &lt;tr <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;firstTr&quot;</span>&gt;</span><br><span class="line">                    &lt;th width=&quot;10%&quot;&gt;用户编码&lt;/th&gt;</span><br><span class="line">                    &lt;th width=&quot;20%&quot;&gt;用户名称&lt;/th&gt;</span><br><span class="line">                    &lt;th width=&quot;10%&quot;&gt;性别&lt;/th&gt;</span><br><span class="line">                    &lt;th width=&quot;10%&quot;&gt;年龄&lt;/th&gt;</span><br><span class="line">                    &lt;th width=&quot;10%&quot;&gt;电话&lt;/th&gt;</span><br><span class="line">                    &lt;th width=&quot;10%&quot;&gt;用户角色&lt;/th&gt;</span><br><span class="line">                    &lt;th width=&quot;30%&quot;&gt;操作&lt;/th&gt;</span><br><span class="line">                &lt;/tr&gt;</span><br><span class="line">                   &lt;c:forEach <span class="keyword">var</span>=<span class="string">&quot;user&quot;</span> items=<span class="string">&quot;$&#123;userList &#125;&quot;</span> varStatus=<span class="string">&quot;status&quot;</span>&gt;</span><br><span class="line">					&lt;tr&gt;</span><br><span class="line">						&lt;td&gt;</span><br><span class="line">						&lt;span&gt;$&#123;user.userCode &#125;&lt;/span&gt;</span><br><span class="line">						&lt;/td&gt;</span><br><span class="line">						&lt;td&gt;</span><br><span class="line">						&lt;span&gt;$&#123;user.userName &#125;&lt;/span&gt;</span><br><span class="line">						&lt;/td&gt;</span><br><span class="line">						&lt;td&gt;</span><br><span class="line">							&lt;span&gt;</span><br><span class="line">								&lt;c:if test=&quot;$&#123;user.gender==1&#125;&quot;&gt;男&lt;/c:if&gt;</span><br><span class="line">								&lt;c:if test=&quot;$&#123;user.gender==2&#125;&quot;&gt;女&lt;/c:if&gt;</span><br><span class="line">							&lt;/span&gt;</span><br><span class="line">						&lt;/td&gt;</span><br><span class="line">						&lt;td&gt;</span><br><span class="line">						&lt;span&gt;$&#123;user.birthday&#125;&lt;/span&gt;</span><br><span class="line">						&lt;/td&gt;</span><br><span class="line">						&lt;td&gt;</span><br><span class="line">						&lt;span&gt;$&#123;user.phone&#125;&lt;/span&gt;</span><br><span class="line">						&lt;/td&gt;</span><br><span class="line">						&lt;td&gt;</span><br><span class="line">							&lt;span&gt;$&#123;user.userRole&#125;&lt;/span&gt;</span><br><span class="line">						&lt;/td&gt;</span><br><span class="line">						&lt;td&gt;</span><br><span class="line">						&lt;span&gt;&lt;a class=&quot;viewUser&quot; href=&quot;javascript:;&quot; userid=$&#123;user.ID &#125; username=$&#123;user.userName &#125;&gt;&lt;img src=&quot;$&#123;pageContext.request.contextPath &#125;/images/read.png&quot; alt=&quot;查看&quot; title=&quot;查看&quot;/&gt;&lt;/a&gt;&lt;/span&gt;</span><br><span class="line">						&lt;span&gt;&lt;a class=&quot;modifyUser&quot; href=&quot;javascript:;&quot; userid=$&#123;user.ID &#125; username=$&#123;user.userName &#125;&gt;&lt;img src=&quot;$&#123;pageContext.request.contextPath &#125;/images/xiugai.png&quot; alt=&quot;修改&quot; title=&quot;修改&quot;/&gt;&lt;/a&gt;&lt;/span&gt;</span><br><span class="line">						&lt;span&gt;&lt;a class=&quot;deleteUser&quot; href=&quot;javascript:;&quot; userid=$&#123;user.ID &#125; username=$&#123;user.userName &#125;&gt;&lt;img src=&quot;$&#123;pageContext.request.contextPath &#125;/images/schu.png&quot; alt=&quot;删除&quot; title=&quot;删除&quot;/&gt;&lt;/a&gt;&lt;/span&gt;</span><br><span class="line">						&lt;/td&gt;</span><br><span class="line">					&lt;/tr&gt;</span><br><span class="line">				&lt;/c:forEach&gt;</span><br><span class="line">			&lt;/table&gt;</span><br><span class="line">			&lt;input type=<span class="string">&quot;hidden&quot;</span> id=<span class="string">&quot;totalPageCount&quot;</span> value=<span class="string">&quot;$&#123;totalPageCount&#125;&quot;</span>/&gt;</span><br><span class="line">		  	&lt;c:<span class="keyword">import</span> url=<span class="string">&quot;/JSP/rollpage.jsp&quot;</span>&gt;</span><br><span class="line">	          	&lt;c:param name=<span class="string">&quot;totalCount&quot;</span> value=<span class="string">&quot;$&#123;totalCount&#125;&quot;</span>/&gt;</span><br><span class="line">	          	&lt;c:param name=<span class="string">&quot;currentPageNo&quot;</span> value=<span class="string">&quot;$&#123;currentPageNo&#125;&quot;</span>/&gt;</span><br><span class="line">	          	&lt;c:param name=<span class="string">&quot;totalPageCount&quot;</span> value=<span class="string">&quot;$&#123;totalPageCount&#125;&quot;</span>/&gt;</span><br><span class="line">          	&lt;/c:import&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/section&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--点击删除按钮后弹出的页面--&gt;</span><br><span class="line">&lt;div class=&quot;zhezhao&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;remove&quot;</span> id=<span class="string">&quot;removeUse&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;removerChid&quot;</span>&gt;</span><br><span class="line">        &lt;h2&gt;提示&lt;/h2&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;removeMain&quot;</span>&gt;</span><br><span class="line">            &lt;p&gt;你确定要删除该用户吗？&lt;/p&gt;</span><br><span class="line">            &lt;a href=&quot;#&quot; id=&quot;yes&quot;&gt;确定&lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;#&quot; id=&quot;no&quot;&gt;取消&lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;%<span class="meta">@include</span> file=<span class="string">&quot;/JSP/common/foot.jsp&quot;</span> %&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;$&#123;pageContext.request.contextPath &#125;/js/userlist.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="十五，文件上传"><a href="#十五，文件上传" class="headerlink" title="十五，文件上传"></a>十五，文件上传</h2><p>需要的jar包：</p>
<p>commo.io;</p>
<p>文件上传要求：</p>
<p>1.为了文件的安全性，我们要把文件放在外界无法直接访问的目录下；</p>
<p>2.要限制文件的大小</p>
<p>3.为了防止发生重名覆盖的现象，我们要避免重名</p>
<p>4.可以限制文件的类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.file;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.FileItem;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.FileUpload;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.FileUploadException;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.ProgressListener;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.disk.DiskFileItemFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.servlet.ServletFileUpload;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">fileUpLoad</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//判断文件是不是有文件上传的项</span></span><br><span class="line">        <span class="keyword">if</span> (! ServletFileUpload.isMultipartContent (req)) &#123;</span><br><span class="line">            <span class="keyword">return</span>;<span class="comment">//终止方法,没有文件上传的功能</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//创建文件上传的路径 建议在WEB-INF目录下因为外部无法直接访问，比较安全；</span></span><br><span class="line">        String realPath = <span class="keyword">this</span>.getServletContext ().getRealPath (<span class="string">&quot;/WEB-INF/load&quot;</span>);</span><br><span class="line">        File file = <span class="keyword">new</span> File (realPath);</span><br><span class="line">        <span class="keyword">if</span> (! file.exists ()) &#123;</span><br><span class="line">            <span class="keyword">boolean</span> mkdir = file.mkdir ();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//临时文件区域，当文件的大小超过了一定的大小，就放在这里，超过一定的时间九自动删除；</span></span><br><span class="line">        String tempPath = <span class="keyword">this</span>.getServletContext ().getRealPath (<span class="string">&quot;/WEB-INF/temp&quot;</span>);</span><br><span class="line">        File temp = <span class="keyword">new</span> File (tempPath);</span><br><span class="line">        <span class="keyword">if</span> (! temp.exists ()) &#123;</span><br><span class="line">            <span class="keyword">boolean</span> mkdir = temp.mkdir ();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//获得一个工厂</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">          @see DiskFileItemFactory</span></span><br><span class="line"><span class="comment">         * public static final int DEFAULT_SIZE_THRESHOLD = 10240;</span></span><br><span class="line"><span class="comment">         *     private File repository; 存储库文件的地方</span></span><br><span class="line"><span class="comment">         *     private int sizeThreshold;  文件的大小</span></span><br><span class="line"><span class="comment">         *     private FileCleaningTracker fileCleaningTracker;清理文件</span></span><br><span class="line"><span class="comment">         *     private String defaultCharset;编码</span></span><br><span class="line"><span class="comment">         *      public static final String DEFAULT_CHARSET = &quot;ISO-8859-1&quot;;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        DiskFileItemFactory factory = <span class="keyword">new</span> DiskFileItemFactory ();</span><br><span class="line">        <span class="comment">//factory要有。</span></span><br><span class="line">        ServletFileUpload Upload = <span class="keyword">new</span> ServletFileUpload ();</span><br><span class="line">        <span class="comment">//监听我们的进程的进度</span></span><br><span class="line">        Upload.setProgressListener (<span class="keyword">new</span> ProgressListener () &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> pBytesRead 已经读取的文件</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> pContentLength 文件上传的大小</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> pItems 已经上传的项目</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span> <span class="params">(<span class="keyword">long</span> pBytesRead, <span class="keyword">long</span> pContentLength, <span class="keyword">int</span> pItems)</span> </span>&#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//获得文件的后缀和文件的名字</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//解析前端的请求，封装成一个fileitem对象</span></span><br><span class="line">        List&lt;FileItem&gt; list = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            list = Upload.parseRequest (req);</span><br><span class="line">            <span class="keyword">for</span> (FileItem fileItem : list) &#123;</span><br><span class="line">                <span class="keyword">if</span> (fileItem.isFormField ()) &#123;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileUploadException e) &#123;</span><br><span class="line">            e.printStackTrace ();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span> <span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet (req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="十六、邮件发送"><a href="#十六、邮件发送" class="headerlink" title="十六、邮件发送"></a>十六、邮件发送</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.saxon.mail;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sun.mail.util.MailSSLSocketFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.activation.DataHandler;</span><br><span class="line"><span class="keyword">import</span> javax.activation.FileDataSource;</span><br><span class="line"><span class="keyword">import</span> javax.mail.*;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.InternetAddress;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.MimeBodyPart;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.MimeMessage;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.MimeMultipart;</span><br><span class="line"><span class="keyword">import</span> java.security.GeneralSecurityException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">mail</span> </span>&#123;</span><br><span class="line">    <span class="comment">//配置文件</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties ();</span><br><span class="line">        <span class="comment">//准备</span></span><br><span class="line">        properties.setProperty (<span class="string">&quot;mail.host&quot;</span>, <span class="string">&quot;smtp.qq.com&quot;</span>);<span class="comment">//设置QQ邮箱</span></span><br><span class="line">        properties.setProperty (<span class="string">&quot;mail.transport.protocol&quot;</span>, <span class="string">&quot;smtp&quot;</span>);<span class="comment">//设置发送协议</span></span><br><span class="line">        properties.setProperty (<span class="string">&quot;mail.smtp.auth&quot;</span>, <span class="string">&quot;true&quot;</span>);<span class="comment">//是否验证密码</span></span><br><span class="line">        <span class="comment">//QQ邮箱</span></span><br><span class="line"></span><br><span class="line">        MailSSLSocketFactory socketFactory = <span class="keyword">new</span> MailSSLSocketFactory ();</span><br><span class="line">        socketFactory.setTrustAllHosts (<span class="keyword">true</span>);</span><br><span class="line">        properties.put (<span class="string">&quot;mail.smtp.ssl.enable&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">        properties.put (<span class="string">&quot;mail.smtp.ssl.socketFactory&quot;</span>, socketFactory);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//邮箱的五个步骤</span></span><br><span class="line">        <span class="comment">//1.设置session环境</span></span><br><span class="line">        Session defaultInstance = Session.getDefaultInstance (properties, <span class="keyword">new</span> Authenticator () &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">protected</span> PasswordAuthentication <span class="title">getPasswordAuthentication</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> PasswordAuthentication (<span class="string">&quot;2433027822@qq.com&quot;</span>, <span class="string">&quot;ffvluhisjcfzebab&quot;</span>);<span class="comment">//前一个写地址，后一个写验证码</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        defaultInstance.setDebug (<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//2获得transport对象.用来发送邮件</span></span><br><span class="line">        Transport ts = defaultInstance.getTransport ();</span><br><span class="line">        <span class="comment">//3.使用邮箱和授权码来进行连接</span></span><br><span class="line">        ts.connect (<span class="string">&quot;smtp.qq.com&quot;</span>, <span class="string">&quot;2433027822#qq.com&quot;</span>, <span class="string">&quot;ffvluhisjcfzebab&quot;</span>);</span><br><span class="line">        <span class="comment">//4,编写邮件</span></span><br><span class="line">        Message message = <span class="keyword">new</span> MimeMessage (defaultInstance);</span><br><span class="line">        <span class="comment">//指明发件人</span></span><br><span class="line">        message.addRecipient (Message.RecipientType.TO, <span class="keyword">new</span> InternetAddress (<span class="string">&quot;2433027822@qq.com&quot;</span>));</span><br><span class="line">        <span class="comment">//设置主题</span></span><br><span class="line">        message.setSubject (<span class="string">&quot;你好啊&quot;</span>);</span><br><span class="line">        <span class="comment">//设置图片内容</span></span><br><span class="line">        MimeBodyPart image = <span class="keyword">new</span> MimeBodyPart ();</span><br><span class="line">        <span class="comment">//图片要处理一下数据</span></span><br><span class="line">        DataHandler dataHandler = <span class="keyword">new</span> DataHandler (<span class="keyword">new</span> FileDataSource (<span class="string">&quot;D:\\dnf补丁\\bg.jpg&quot;</span>));</span><br><span class="line">        image.setDataHandler (dataHandler);</span><br><span class="line">        image.setContentID (<span class="string">&quot;bg.jpg&quot;</span>);<span class="comment">//这里设置的ID我们子啊后面可以接着使用</span></span><br><span class="line">        <span class="comment">//准备正文数据</span></span><br><span class="line">        MimeBodyPart content=<span class="keyword">new</span> MimeBodyPart ();</span><br><span class="line">        content.setContent (<span class="string">&quot;这是一个带有图片的邮件&lt;img src=&#x27;uid:bg.jpg&#x27;&gt;&quot;</span>,<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">//描述数据关系</span></span><br><span class="line">        MimeMultipart mm=<span class="keyword">new</span> MimeMultipart ();</span><br><span class="line">        mm.addBodyPart (image);</span><br><span class="line">        mm.addBodyPart (content);</span><br><span class="line">        mm.setSubType (<span class="string">&quot;related&quot;</span>);</span><br><span class="line">        message.setText (<span class="string">&quot;这是第一份邮件&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置到消息中</span></span><br><span class="line">        message.setContent (mm);<span class="comment">//把最后消息发送到消息中</span></span><br><span class="line">        message.saveChanges ();<span class="comment">//保存修改</span></span><br><span class="line">        <span class="comment">//设置接受的人</span></span><br><span class="line">        message.setFrom (<span class="keyword">new</span> InternetAddress (<span class="string">&quot;2433027822@qq.com&quot;</span>));</span><br><span class="line">        <span class="comment">//5.发送邮件</span></span><br><span class="line">        ts.sendMessage (message,message.getAllRecipients ());</span><br><span class="line">        ts.close ();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Saxon</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.saxonmo.com/2020/12/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JAVA%20Web/">http://www.saxonmo.com/2020/12/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/JAVA%20Web/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.saxonmo.com" target="_blank">Saxon 一个向往远方的游者</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/12/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Java%20%E5%9F%BA%E7%A1%80/"><img class="prev-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info"></div></div></a></div><div class="next-post pull-right"><a href="/2020/12/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info"></div></div></a></div></nav></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://w.wallhaven.cc/full/2e/wallhaven-2eroxm.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Saxon</div><div class="author-info__description">无论走得多慢，我一直向往远方</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">50</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/SaxonMo"><i class="fab fa-github"></i><span>Github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xxxxx" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:xxxxxx@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到莫松的博客，一个在校二本大学生🧑‍🎓。在这个博客里，我会分享自己自学的笔记，不为感动自己，只为给自己的代码时光留下些回忆</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JAVA-WEB"><span class="toc-number">1.</span> <span class="toc-text">JAVA　WEB</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.1.</span> <span class="toc-text">一、基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%89%8D%E8%A8%80"><span class="toc-number">1.1.1.</span> <span class="toc-text">一、前言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81web%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.1.2.</span> <span class="toc-text">二、web应用程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E9%9D%99%E6%80%81web"><span class="toc-number">1.1.3.</span> <span class="toc-text">三、静态web</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%8A%A8%E6%80%81web"><span class="toc-number">1.1.4.</span> <span class="toc-text">四、动态web</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81web%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.2.</span> <span class="toc-text">二、web服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80"><span class="toc-number">1.2.1.</span> <span class="toc-text">一、脚本语言</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81asp"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">一、asp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81PHP"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">二、PHP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E3%80%81JSP"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">三、JSP</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81web%E6%9C%8D%E5%8A%A1%E5%99%A8-1"><span class="toc-number">1.2.2.</span> <span class="toc-text">二、web服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Tomcat"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">Tomcat:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81tomcat"><span class="toc-number">1.3.</span> <span class="toc-text">三、tomcat</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%AE%89%E8%A3%85Tomcat"><span class="toc-number">1.3.0.1.</span> <span class="toc-text">一、安装Tomcat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.0.2.</span> <span class="toc-text">二、配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%9B%B4%E6%94%B9%E8%AE%BE%E5%A4%87%E7%9A%84%E7%AB%AF%E5%8F%A3%E5%8F%B7"><span class="toc-number">1.3.0.2.1.</span> <span class="toc-text">1.更改设备的端口号</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE%E4%B8%BB%E6%9C%BA%E5%90%8D%E7%A7%B0"><span class="toc-number">1.3.0.2.2.</span> <span class="toc-text">2.配置主机名称</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%A6%82%E4%BD%95%E5%8F%91%E5%B8%83%E4%B8%80%E4%B8%AA%E7%BD%91%E7%AB%99"><span class="toc-number">1.3.0.3.</span> <span class="toc-text">三、如何发布一个网站</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81HTTP"><span class="toc-number">1.4.</span> <span class="toc-text">四、HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AFHTTP"><span class="toc-number">1.4.0.1.</span> <span class="toc-text">一、什么是HTTP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81HTTP%E8%AF%B7%E6%B1%82%EF%BC%88%E7%99%BE%E5%BA%A6%EF%BC%89"><span class="toc-number">1.4.0.2.</span> <span class="toc-text">二、HTTP请求（百度）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E8%AF%B7%E6%B1%82%E8%A1%8C"><span class="toc-number">1.4.0.2.1.</span> <span class="toc-text">1.请求行</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%B6%88%E6%81%AF%E4%BD%93"><span class="toc-number">1.4.0.2.2.</span> <span class="toc-text">2.消息体</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E3%80%81HTTP%E5%93%8D%E5%BA%94%EF%BC%88%E7%99%BE%E5%BA%A6%EF%BC%89"><span class="toc-number">1.4.0.3.</span> <span class="toc-text">三、HTTP响应（百度）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%93%8D%E5%BA%94%E4%BD%93"><span class="toc-number">1.4.0.3.1.</span> <span class="toc-text">1.响应体</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">1.4.0.3.2.</span> <span class="toc-text">2.响应状态码</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81Maven%EF%BC%88-%E7%BA%A6%E5%AE%9A%E5%A4%A7%E4%BA%8E%E9%85%8D%E7%BD%AE-%EF%BC%89"><span class="toc-number">1.5.</span> <span class="toc-text">五、Maven（&#x3D;&#x3D;约定大于配置&#x3D;&#x3D;）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">1.5.1.</span> <span class="toc-text">一、环境变量的配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F%E9%85%8D%E7%BD%AE"><span class="toc-number">1.5.2.</span> <span class="toc-text">二、阿里云镜像配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93"><span class="toc-number">1.5.3.</span> <span class="toc-text">三、本地仓库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81ideal%E4%BD%BF%E7%94%A8maven"><span class="toc-number">1.5.4.</span> <span class="toc-text">四、ideal使用maven</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81maven%E4%BB%93%E5%BA%93"><span class="toc-number">1.5.5.</span> <span class="toc-text">五、maven仓库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E4%BD%BF%E7%94%A8"><span class="toc-number">1.6.</span> <span class="toc-text">六、使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%85%88%E5%86%99%E5%87%BA%E4%B8%80%E4%B8%AAjava%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.6.0.0.1.</span> <span class="toc-text">1.先写出一个java程序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E4%BF%AE%E6%94%B9webaapps%E4%B8%AD%E7%9A%84web-xml%E6%96%87%E4%BB%B6"><span class="toc-number">1.6.0.0.2.</span> <span class="toc-text">2.修改webaapps中的web.xml文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%B5%8B%E8%AF%95"><span class="toc-number">1.6.0.0.3.</span> <span class="toc-text">3.测试</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81servlet"><span class="toc-number">1.7.</span> <span class="toc-text">七、servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BD%BF%E7%94%A8"><span class="toc-number">1.7.1.</span> <span class="toc-text">一、使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%BB%BA%E7%AB%8B%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E7%9A%84maven%E9%A1%B9%E7%9B%AE%EF%BC%8C%E4%B8%8D%E5%8A%A0%E6%A8%A1%E6%9D%BF%E7%9A%84%E9%A1%B9%E7%9B%AE%E3%80%82%E5%88%A0%E9%99%A4src%E6%96%87%E4%BB%B6%E8%BF%99%E6%A0%B7%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%9C%A8%E8%BF%99%E4%B8%AA%E9%A1%B9%E7%9B%AE%E4%B8%8B%E5%BB%BA%E7%AB%8B%E5%BE%88%E5%A4%9A%E7%9A%84%E5%AD%90%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.7.1.0.1.</span> <span class="toc-text">1.建立一个普通的maven项目，不加模板的项目。删除src文件这样就可以在这个项目下建立很多的子项目</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%BB%BA%E7%AB%8B%E4%B8%80%E4%B8%AA%E5%AD%90%E9%A1%B9%E7%9B%AE%EF%BC%8C%E5%AD%90%E9%A1%B9%E7%9B%AE%E7%9A%84pom-xml%E5%B0%B1%E4%BC%9A%E6%9C%89%E7%88%B6%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">1.7.1.0.2.</span> <span class="toc-text">2.建立一个子项目，子项目的pom.xml就会有父项目的信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E7%8E%AF%E5%A2%83%E4%BC%98%E5%8C%96"><span class="toc-number">1.7.1.0.3.</span> <span class="toc-text">3.环境优化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E7%BC%96%E5%86%99%E7%AC%AC%E4%B8%80%E4%B8%AAservlet%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.7.1.0.4.</span> <span class="toc-text">4.编写第一个servlet程序</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-number">1.7.2.</span> <span class="toc-text">二、原理：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81servlet-mapping"><span class="toc-number">1.7.3.</span> <span class="toc-text">三、servlet mapping</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%B8%80%E4%B8%AA%E5%AF%B9%E5%BA%94%E4%B8%80%E4%B8%AA"><span class="toc-number">1.7.3.1.</span> <span class="toc-text">一、一个对应一个</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E4%B8%80%E4%B8%AA%E5%AF%B9%E5%BA%94%E5%A4%9A%E4%B8%AA"><span class="toc-number">1.7.3.2.</span> <span class="toc-text">二、一个对应多个</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%B8%80%E4%B8%AA%E5%AF%B9%E5%BA%94%E6%89%80%E6%9C%89%E7%9A%84%E6%98%A0%E5%B0%84"><span class="toc-number">1.7.3.3.</span> <span class="toc-text">三、一个对应所有的映射</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E8%AF%B7%E6%B1%82%E7%9A%84%E8%B7%AF%E5%BE%84"><span class="toc-number">1.7.3.4.</span> <span class="toc-text">四、修改默认请求的路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%9B%BA%E5%AE%9A%E7%9A%84%E6%96%87%E4%BB%B6%E5%90%8E%E7%BC%80%E5%8F%AF%E4%BB%A5%E8%AE%BF%E9%97%AE"><span class="toc-number">1.7.3.5.</span> <span class="toc-text">五、固定的文件后缀可以访问</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81ServletContext"><span class="toc-number">1.7.4.</span> <span class="toc-text">四、ServletContext</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%90%AB%E4%B9%89"><span class="toc-number">1.7.4.1.</span> <span class="toc-text">一、含义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%B5%8B%E8%AF%95servlet%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-number">1.7.4.2.</span> <span class="toc-text">二、测试servlet之间的通信</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E8%8E%B7%E5%BE%97%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%82%E6%95%B0"><span class="toc-number">1.7.4.3.</span> <span class="toc-text">三、获得初始化参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91"><span class="toc-number">1.7.4.4.</span> <span class="toc-text">四、请求转发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.7.4.5.</span> <span class="toc-text">五、读取配置文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81Response"><span class="toc-number">1.8.</span> <span class="toc-text">八、Response</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6"><span class="toc-number">1.8.0.1.</span> <span class="toc-text">一、下载文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E9%AA%8C%E8%AF%81%E7%A0%81%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.8.0.2.</span> <span class="toc-text">二、验证码的实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%AE%9E%E7%8E%B0%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">1.8.0.3.</span> <span class="toc-text">三、实现重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%A6%82%E5%BF%B5"><span class="toc-number">1.8.0.3.1.</span> <span class="toc-text">1.概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%B5%8B%E8%AF%95"><span class="toc-number">1.8.0.3.2.</span> <span class="toc-text">2.测试</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81request"><span class="toc-number">1.9.</span> <span class="toc-text">九、request</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E8%AF%95%E4%B8%80%E4%B8%8B"><span class="toc-number">1.9.0.1.</span> <span class="toc-text">一、试一下</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E8%8E%B7%E5%BE%97%E5%89%8D%E7%AB%AF%E4%BF%A1%E6%81%AF"><span class="toc-number">1.9.0.2.</span> <span class="toc-text">二、获得前端信息</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81cookie-session"><span class="toc-number">1.10.</span> <span class="toc-text">十、cookie session</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BC%9A%E8%AF%9D"><span class="toc-number">1.10.1.</span> <span class="toc-text">一、会话</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%A6%82%E5%BF%B5"><span class="toc-number">1.10.1.1.</span> <span class="toc-text">一、概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E4%BF%9D%E5%AD%98%E4%BC%9A%E8%AF%9D%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">1.10.1.2.</span> <span class="toc-text">二、保存会话的两种方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81cookie"><span class="toc-number">1.10.2.</span> <span class="toc-text">二、cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%B7%BB%E5%8A%A0"><span class="toc-number">1.10.2.0.1.</span> <span class="toc-text">1.添加</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%88%A0%E9%99%A4"><span class="toc-number">1.10.2.0.2.</span> <span class="toc-text">2.删除</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-cookie%E7%9A%84%E4%B8%8A%E9%99%90"><span class="toc-number">1.10.2.1.</span> <span class="toc-text">3.cookie的上限</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81session"><span class="toc-number">1.10.3.</span> <span class="toc-text">三、session</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%A6%82%E5%BF%B5-1"><span class="toc-number">1.10.3.1.</span> <span class="toc-text">一、概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%B5%8B%E8%AF%95"><span class="toc-number">1.10.3.2.</span> <span class="toc-text">二、测试</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E8%8E%B7%E5%8F%96session%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%B7%BB%E5%8A%A0%E8%8A%82%E7%82%B9%E4%BF%A1%E6%81%AF"><span class="toc-number">1.10.3.2.1.</span> <span class="toc-text">1.获取session对象，添加节点信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E8%8E%B7%E5%BE%97session%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">1.10.3.2.2.</span> <span class="toc-text">2.获得session的信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%88%A0%E9%99%A4session"><span class="toc-number">1.10.3.2.3.</span> <span class="toc-text">3.删除session</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E3%80%81session%E4%B8%8Ecookie%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.10.3.3.</span> <span class="toc-text">三、session与cookie的区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81JSP"><span class="toc-number">1.11.</span> <span class="toc-text">十一、JSP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%A6%82%E5%BF%B5-2"><span class="toc-number">1.11.1.</span> <span class="toc-text">一、概念</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-jsp%E7%9A%84%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-number">1.11.1.0.1.</span> <span class="toc-text">1.jsp的运行原理：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.11.1.0.2.</span> <span class="toc-text">2.内置对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="toc-number">1.11.1.0.3.</span> <span class="toc-text">3.运行过程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%AF%B9%E6%AF%94jsp%E5%92%8Cjsp-java"><span class="toc-number">1.11.1.0.4.</span> <span class="toc-text">4.对比jsp和jsp.java</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">1.11.2.</span> <span class="toc-text">二、基本语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96%E7%9A%84%E5%8C%85"><span class="toc-number">1.11.2.1.</span> <span class="toc-text">一、导入依赖的包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-1"><span class="toc-number">1.11.2.2.</span> <span class="toc-text">二、基本语法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81jsp%E6%8C%87%E4%BB%A4"><span class="toc-number">1.11.3.</span> <span class="toc-text">三、jsp指令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E9%85%8D%E7%BD%AE%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2"><span class="toc-number">1.11.3.0.1.</span> <span class="toc-text">1、配置错误页面</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81jsp%E7%9A%84%E5%9B%9B%E5%A4%A7%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C9%E5%A4%A7%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.11.4.</span> <span class="toc-text">四、jsp的四大作用域和9大内置对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-9%E5%A4%A7%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.11.4.1.</span> <span class="toc-text">1.9大内置对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%9B%9B%E5%A4%A7%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.11.4.2.</span> <span class="toc-text">2、四大作用域</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81JSP%E6%A0%87%E7%AD%BE%EF%BC%8CJSTL%E6%A0%87%E7%AD%BE%EF%BC%8CEL%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.11.5.</span> <span class="toc-text">五、JSP标签，JSTL标签，EL表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81JSTL%E6%A0%87%E7%AD%BE"><span class="toc-number">1.11.5.1.</span> <span class="toc-text">一、JSTL标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81EL%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.11.5.2.</span> <span class="toc-text">二、EL表达式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81JavaBean"><span class="toc-number">1.12.</span> <span class="toc-text">十一、JavaBean</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81MVC%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="toc-number">1.13.</span> <span class="toc-text">十二、MVC三层架构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E8%BF%87%E6%BB%A4%E5%99%A8filter"><span class="toc-number">1.14.</span> <span class="toc-text">十三、过滤器filter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E5%9B%9B%E3%80%81SMBMS%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.15.</span> <span class="toc-text">十四、SMBMS系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.15.1.</span> <span class="toc-text">一、步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E5%9F%BA%E7%A1%80%E5%85%AC%E5%85%B1%E7%B1%BB%EF%BC%8C%E5%B7%A5%E5%85%B7%E7%B1%BB%EF%BC%9B"><span class="toc-number">1.15.1.0.1.</span> <span class="toc-text">编写基础公共类，工具类；</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6db-properties"><span class="toc-number">1.15.1.0.1.1.</span> <span class="toc-text">数据库配置文件db.properties,</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E7%BC%96%E5%86%99%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%9F%A5%E8%AF%A2%E7%B1%BB"><span class="toc-number">1.15.1.0.1.2.</span> <span class="toc-text">2.编写数据库的查询类</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E7%BC%96%E5%86%99%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">1.15.1.0.1.3.</span> <span class="toc-text">3.编写字符编码过滤器</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-%E5%AF%BC%E5%85%A5%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="toc-number">1.15.1.0.2.</span> <span class="toc-text">7.导入静态资源</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-%E7%BC%96%E5%86%99Dao%E5%B1%82%E4%BB%A3%E7%A0%81"><span class="toc-number">1.15.1.0.3.</span> <span class="toc-text">8.编写Dao层代码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-%E7%BC%96%E5%86%99service%E5%B1%82%E4%BB%A3%E7%A0%81"><span class="toc-number">1.15.1.0.4.</span> <span class="toc-text">9.编写service层代码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-%E7%BC%96%E5%86%99%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95servlet"><span class="toc-number">1.15.1.0.5.</span> <span class="toc-text">10.编写注册登录servlet</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%AF%86%E7%A0%81%E4%BF%AE%E6%94%B9"><span class="toc-number">1.15.2.</span> <span class="toc-text">二、密码修改</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%97%A7%E5%AF%86%E7%A0%81%E9%AA%8C%E8%AF%81"><span class="toc-number">1.15.2.1.</span> <span class="toc-text">1.旧密码验证</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%AF%86%E7%A0%81%E6%9B%B4%E6%96%B0"><span class="toc-number">1.15.2.2.</span> <span class="toc-text">2.密码更新</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-userDao"><span class="toc-number">1.15.2.2.1.</span> <span class="toc-text">1.userDao</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">1.15.3.</span> <span class="toc-text">三、用户管理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E7%94%A8%E6%88%B7%EF%BC%9A"><span class="toc-number">1.15.3.0.1.</span> <span class="toc-text">查询用户：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%95%B0%E9%87%8F%EF%BC%9A"><span class="toc-number">1.15.3.0.2.</span> <span class="toc-text">查询数量：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E7%94%A8%E6%88%B7%E7%9A%84%E8%A7%92%E8%89%B2%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">1.15.3.0.3.</span> <span class="toc-text">查询用户的角色的信息</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%94%EF%BC%8C%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">1.16.</span> <span class="toc-text">十五，文件上传</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E5%85%AD%E3%80%81%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81"><span class="toc-number">1.17.</span> <span class="toc-text">十六、邮件发送</span></a></li></ol></li></ol></div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2020/12/11/ElasticSearch%E4%B9%8B%E6%96%87%E6%A1%A3%E6%93%8D%E4%BD%9C/" title="ElasticSearch之文档操作"><img src="https://saxon.oss-cn-shenzhen.aliyuncs.com/blog/es.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ElasticSearch之文档操作"/></a><div class="content"><a class="title" href="/2020/12/11/ElasticSearch%E4%B9%8B%E6%96%87%E6%A1%A3%E6%93%8D%E4%BD%9C/" title="ElasticSearch之文档操作">ElasticSearch之文档操作</a><time datetime="2020-12-11T04:24:14.000Z" title="发表于 2020-12-11 12:24:14">2020-12-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/11/ElasticSearch%E4%B9%8B%E9%9B%86%E6%88%90SpringBoot/" title="ElasticSearch之集成SpringBoot"><img src="https://saxon.oss-cn-shenzhen.aliyuncs.com/blog/es.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ElasticSearch之集成SpringBoot"/></a><div class="content"><a class="title" href="/2020/12/11/ElasticSearch%E4%B9%8B%E9%9B%86%E6%88%90SpringBoot/" title="ElasticSearch之集成SpringBoot">ElasticSearch之集成SpringBoot</a><time datetime="2020-12-11T04:24:00.000Z" title="发表于 2020-12-11 12:24:00">2020-12-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/11/ElasticSearch%E4%B9%8BRestful%E9%A3%8E%E6%A0%BC/" title="ElasticSearch之Restful风格"><img src="https://saxon.oss-cn-shenzhen.aliyuncs.com/blog/es.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ElasticSearch之Restful风格"/></a><div class="content"><a class="title" href="/2020/12/11/ElasticSearch%E4%B9%8BRestful%E9%A3%8E%E6%A0%BC/" title="ElasticSearch之Restful风格">ElasticSearch之Restful风格</a><time datetime="2020-12-11T04:23:46.000Z" title="发表于 2020-12-11 12:23:46">2020-12-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/11/ElasticSearch%E4%B9%8BIK%E5%88%86%E8%AF%8D%E5%99%A8/" title="ElasticSearch之IK分词器"><img src="https://saxon.oss-cn-shenzhen.aliyuncs.com/blog/es.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ElasticSearch之IK分词器"/></a><div class="content"><a class="title" href="/2020/12/11/ElasticSearch%E4%B9%8BIK%E5%88%86%E8%AF%8D%E5%99%A8/" title="ElasticSearch之IK分词器">ElasticSearch之IK分词器</a><time datetime="2020-12-11T04:23:30.000Z" title="发表于 2020-12-11 12:23:30">2020-12-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/11/elasticsearch%E4%B9%8Belasticsearch%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5/" title="Elasticsearch之Elasticsearch核心概念"><img src="https://saxon.oss-cn-shenzhen.aliyuncs.com/blog/es.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Elasticsearch之Elasticsearch核心概念"/></a><div class="content"><a class="title" href="/2020/12/11/elasticsearch%E4%B9%8Belasticsearch%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5/" title="Elasticsearch之Elasticsearch核心概念">Elasticsearch之Elasticsearch核心概念</a><time datetime="2020-12-11T04:23:17.000Z" title="发表于 2020-12-11 12:23:17">2020-12-11</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 By Saxon</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="icp"><a><img class="icp-icon" src="/img/icp.png" alt="ICP"/><span>滇ICP备2020007353号-1</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>